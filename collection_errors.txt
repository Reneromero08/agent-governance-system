============================= test session starts =============================
platform win32 -- Python 3.11.6, pytest-9.0.2, pluggy-1.6.0
rootdir: D:\CCC 2.0\AI\agent-governance-system
plugins: anyio-4.12.0
collected 99 items / 18 errors

<Dir agent-governance-system>
  <Package CAPABILITY>
    <Dir TESTBENCH>
      <Dir adversarial>
        <Module test_adversarial_cas.py>
          <Function test_cas_corruption_detected_by_hash_toolbelt>
          <Function test_cas_truncation_detected_by_hash_toolbelt>
          <Function test_cas_partial_write_never_treated_as_present>
        <Module test_adversarial_ledger.py>
          <Function test_ledger_rejects_malformed_json_line>
          <Function test_ledger_rejects_truncated_last_line_mid_byte>
        <Module test_adversarial_paths.py>
          <Function test_normalize_relpath_rejects_traversal_and_absolute>
          <Function test_normalize_relpath_normalizes_separators_and_dot>
          <Function test_merkle_rejects_non_normalized_paths>
          <Function test_build_manifest_rejects_non_normalized_paths>
        <Module test_adversarial_proof_tamper.py>
          <Function test_proof_hash_tamper_fails_closed_deterministic>
          <Function test_proof_hash_tamper_fails_non_deterministic>
      <Dir integration>
        <Module test_cortex_integration.py>
          <Function test_system1_db>
          <Function test_cortex_indexer>
          <Function test_search_functionality>
        <Module test_demo_memoization_hash_reuse.py>
          <Function test_phase2_demo_artifacts_are_falsifiable>
        <Module test_memoization.py>
          <Function test_memoization_miss_then_hit_then_invalidate>
        <Module test_packing_hygiene.py>
          <Function test_packing_hygiene>
        <Module test_spectrum_04_05_enforcement.py>
          <Function test_canonicalization>
          <Function test_bundle_root_computation>
          <Function test_identity_verification>
          <Function test_signature_verification>
          <Function test_chain_root_computation>
          <Function test_chain_empty_check>
          <Function test_chain_duplicate_run_check>
      <Dir phases>
        <Dir phase6_governance>
          <Module test_ags_phase6_adapter_contract.py>
            <Function test_adapter_happy_path_deterministic>
            <Function test_adapter_reject_missing_command>
            <Function test_adapter_reject_hidden_side_effects>
            <Function test_adapter_reject_unbounded_deref_caps>
            <Function test_adapter_reject_non_normalized_paths>
            <Function test_adapter_reject_nondeterministic_flag_strict>
          <Module test_ags_phase6_bridge.py>
            <Function test_ags_route_deterministic_bytes>
            <Function test_ags_run_calls_verify_ok>
            <Function test_pipeline_run_creates_state_when_missing>
          <Module test_ags_phase6_capability_registry.py>
            <Function test_capability_registry_happy_unknown_and_tamper>
          <Module test_ags_phase6_capability_revokes.py>
            <Function test_revoked_capability_rejects_at_route>
            <Function test_verify_rejects_revoked_capability>
          <Module test_ags_phase6_mcp_adapter_e2e.py>
            <Function test_happy_echo>
            <Function test_fail_stderr>
            <Function test_fail_timeout>
            <Function test_fail_bloat>
            <Function test_fail_malformed_output>
            <Function test_fail_crash>
        <Dir phase7_swarm>
          <Module test_phase7_acceptance.py>
            <Function test_swarm_chain_binds_pipeline_proofs>
            <Function test_swarm_chain_fails_on_tampered_proof>
          <Module test_swarm_reuse.py>
            <Function test_swarm_execution_elision>
          <Module test_swarm_runtime.py>
            <Function test_swarm_runtime_happy_path>
        <Dir phase8_router>
          <Module test_phase8_router_receipts.py>
            <Function test_router_receipts_created>
            <Function test_router_over_output_fails_closed>
            <Function test_router_stderr_fails_closed>
            <Function test_malformed_plan_fails_schema_validation>
            <Function test_capability_escalation_fails_closed>
      <Dir pipeline>
        <Module test_pipeline_dag.py>
          <Function test_dag_spec_validation>
          <Function test_dag_topo_sort>
        <Module test_pipeline_verify_cli.py>
          <Function test_pipeline_verify_ok>
          <Function test_pipeline_verify_missing_artifact>
          <Function test_pipeline_verify_chain_tamper>
          <Function test_pipeline_verify_ledger_corrupt>
        <Module test_pipelines.py>
          <Function test_pipeline_init_is_deterministic_and_resume_safe>
        <Module test_proof_gating.py>
          <Function test_valid_proof_accepted>
          <Function test_proof_is_single_source_of_truth>
        <Module test_proof_wiring.py>
          <Function test_rerun_determinism_proof_and_domain_roots_bytes_identical>
          <Function test_tamper_detection_hash_mismatch>
          <Function test_path_normalization_rejects_traversal>
        <Module test_restore_proof.py>
          <Function test_identical_artifacts_verified_true>
          <Function test_hash_mismatch_verified_false>
          <Function test_missing_files_verified_false>
          <Function test_extra_files_verified_false>
          <Function test_deterministic_output>
          <Function test_proof_validates_against_schema>
          <Function test_empty_domains_verified_true>
        <Module test_restore_runner.py>
          <Function test_restore_rejects_when_verifier_strict_fails>
          <Function test_restore_success_emits_artifacts_and_matches_hashes>
          <Function test_restore_rollback_failure_returns_restore_rollback_failed>
        <Module test_runtime_guard.py>
          <Function test_allowed_write_succeeds>
          <Function test_guarded_write_text_succeeds>
          <Function test_guarded_mkdir_succeeds>
          <Function test_guarded_write_bytes_succeeds>
          <Function test_path_normalization>
          <Function test_forbidden_path_fails>
          <Function test_forbidden_path_guarded_write_fails>
          <Function test_write_outside_allowed_roots_fails>
          <Function test_path_traversal_fails>
          <Function test_absolute_path_outside_project_fails>
          <Function test_multiple_allowed_roots_work>
          <Function test_all_forbidden_paths_rejected>
          <Function test_guarded_mkdir_forbidden_fails>
        <Module test_verifier_interop.py>
          <Function test_interop_valid_bundle_byte_identical>
          <Function test_interop_tampered_bundle_reject_same_code_and_bytes>
          <Function test_interop_chain_verification_byte_identical>
          <Function test_interop_determinism_rerun_same_inputs_same_bytes>
        <Module test_verify_bundle.py>
          <Function test_valid_bundle>
          <Function test_status_failure>
          <Function test_tampered_output>
          <Function test_forbidden_artifact>
          <Function test_chain_valid>
          <Function test_chain_tamper_middle>
      <Dir spectrum>
        <Module test_spectrum02_emission.py>
          <Function test_spectrum02_emission>
        <Module test_spectrum02_resume.py>
          <Function test_spectrum02_resume>
        <Module test_validator_version_integrity.py>
          <Function test_validator_version_integrity>

=================================== ERRORS ====================================
________ ERROR collecting CAPABILITY/TESTBENCH/core/test_cas_store.py _________
ImportError while importing test module 'D:\CCC 2.0\AI\agent-governance-system\CAPABILITY\TESTBENCH\core\test_cas_store.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
C:\Users\rene_\AppData\Local\Programs\Python\Python311\Lib\importlib\__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
CAPABILITY\TESTBENCH\core\test_cas_store.py:1: in <module>
    from CAPABILITY.core.test_cas_store import CatalyticStore, normalize_relpath
E   ModuleNotFoundError: No module named 'CAPABILITY.core'
______ ERROR collecting CAPABILITY/TESTBENCH/core/test_hash_toolbelt.py _______
CAPABILITY\TESTBENCH\core\test_hash_toolbelt.py:9: in <module>
    REPO_ROOT = Path(__file__).resolve().parents[3]
                ^^^^
E   NameError: name 'Path' is not defined
__________ ERROR collecting CAPABILITY/TESTBENCH/core/test_merkle.py __________
ImportError while importing test module 'D:\CCC 2.0\AI\agent-governance-system\CAPABILITY\TESTBENCH\core\test_merkle.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
C:\Users\rene_\AppData\Local\Programs\Python\Python311\Lib\importlib\__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
CAPABILITY\TESTBENCH\core\test_merkle.py:11: in <module>
    from CAPABILITY.core.test_merkle import build_manifest_root, verify_manifest_root
E   ModuleNotFoundError: No module named 'CAPABILITY.core'
_________ ERROR collecting CAPABILITY/TESTBENCH/core/test_schemas.py __________
CAPABILITY\TESTBENCH\core\test_schemas.py:20: in <module>
    _fail(f"missing schema file: {k} -> {p}")
    ^^^^^
E   NameError: name '_fail' is not defined
___ ERROR collecting CAPABILITY/TESTBENCH/integration/test_deref_logging.py ___
CAPABILITY\TESTBENCH\integration\test_deref_logging.py:4: in <module>
    if str(REPO_ROOT) not in sys.path:
                             ^^^
E   NameError: name 'sys' is not defined
_ ERROR collecting CAPABILITY/TESTBENCH/integration/test_governance_coverage.py _
ImportError while importing test module 'D:\CCC 2.0\AI\agent-governance-system\CAPABILITY\TESTBENCH\integration\test_governance_coverage.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
C:\Users\rene_\AppData\Local\Programs\Python\Python311\Lib\importlib\__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
CAPABILITY\TESTBENCH\integration\test_governance_coverage.py:5: in <module>
    from integration import test_governance_coverage
E   ModuleNotFoundError: No module named 'integration'
_____ ERROR collecting CAPABILITY/TESTBENCH/integration/test_preflight.py _____
CAPABILITY\TESTBENCH\integration\test_preflight.py:10: in <module>
    @pytest.fixture
     ^^^^^^
E   NameError: name 'pytest' is not defined
__ ERROR collecting CAPABILITY/TESTBENCH/integration/test_skills_registry.py __
CAPABILITY\TESTBENCH\integration\test_skills_registry.py:3: in <module>
    sys.path.insert(3, str(REPO_ROOT.parents[3]))
    ^^^
E   NameError: name 'sys' is not defined
_ ERROR collecting CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_capability_pins.py _
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_capability_pins.py:1: in <module>
    REPO_ROOT = Path(__file__).resolve().parents[4]
                ^^^^
E   NameError: name 'Path' is not defined
_ ERROR collecting CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_capability_versioning_semantics.py _
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_capability_versioning_semantics.py:4: in <module>
    REPO_ROOT = Path(__file__).resolve().parents[4]
                ^^^^
E   NameError: name 'Path' is not defined
_ ERROR collecting CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_registry_immutability.py _
C:\Users\rene_\AppData\Local\Programs\Python\Python311\Lib\site-packages\_pytest\python.py:507: in importtestmodule
    mod = import_path(
C:\Users\rene_\AppData\Local\Programs\Python\Python311\Lib\site-packages\_pytest\pathlib.py:587: in import_path
    importlib.import_module(module_name)
C:\Users\rene_\AppData\Local\Programs\Python\Python311\Lib\importlib\__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1204: in _gcd_import
    ???
<frozen importlib._bootstrap>:1176: in _find_and_load
    ???
<frozen importlib._bootstrap>:1147: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:690: in _load_unlocked
    ???
C:\Users\rene_\AppData\Local\Programs\Python\Python311\Lib\site-packages\_pytest\assertion\rewrite.py:188: in exec_module
    source_stat, co = _rewrite_test(fn, self.config)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\rene_\AppData\Local\Programs\Python\Python311\Lib\site-packages\_pytest\assertion\rewrite.py:357: in _rewrite_test
    tree = ast.parse(source, filename=strfn)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\rene_\AppData\Local\Programs\Python\Python311\Lib\ast.py:50: in parse
    return compile(source, filename, mode, flags,
E     File "D:\CCC 2.0\AI\agent-governance-system\CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_registry_immutability.py", line 26
E       )
E       ^
E   SyntaxError: f-string: single '}' is not allowed
_ ERROR collecting CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_router_slot.py _
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_router_slot.py:1: in <module>
    REPO_ROOT = Path(__file__).resolve().parents[4]
                ^^^^
E   NameError: name 'Path' is not defined
_ ERROR collecting CAPABILITY/TESTBENCH/phases/phase8_router/test_ags_phase8_model_binding.py _
CAPABILITY\TESTBENCH\phases\phase8_router\test_ags_phase8_model_binding.py:1: in <module>
    REPO_ROOT = Path(__file__).resolve().parents[4]
                ^^^^
E   NameError: name 'Path' is not defined
_ ERROR collecting CAPABILITY/TESTBENCH/pipeline/test_canonical_artifacts.py __
CAPABILITY\TESTBENCH\pipeline\test_canonical_artifacts.py:2: in <module>
    REPO_ROOT = Path(__file__).resolve().parents[3]
                ^^^^
E   NameError: name 'Path' is not defined
________ ERROR collecting CAPABILITY/TESTBENCH/pipeline/test_ledger.py ________
CAPABILITY\TESTBENCH\pipeline\test_ledger.py:1: in <module>
    WRONG: sys.path.insert(0, "/path/to/6-bucket/architecture")
           ^^^
E   NameError: name 'sys' is not defined
____ ERROR collecting CAPABILITY/TESTBENCH/pipeline/test_pipeline_chain.py ____
CAPABILITY\TESTBENCH\pipeline\test_pipeline_chain.py:14: in <module>
    sys.path_cleanup()
    ^^^^^^^^^^^^^^^^
E   AttributeError: module 'sys' has no attribute 'path_cleanup'
___ ERROR collecting CAPABILITY/TESTBENCH/pipeline/test_verifier_freeze.py ____
CAPABILITY\TESTBENCH\pipeline\test_verifier_freeze.py:1: in <module>
    WRONG: REPO_ROOT = Path(__file__).resolve().parents[2]
                       ^^^^
E   NameError: name 'Path' is not defined
___ ERROR collecting CAPABILITY/TESTBENCH/spectrum/test_spectrum03_chain.py ___
CAPABILITY\TESTBENCH\spectrum\test_spectrum03_chain.py:1: in <module>
    REPO_ROOT = Path(__file__).resolve().parents[3]
                ^^^^
E   NameError: name 'Path' is not defined
============================== warnings summary ===============================
CAPABILITY\TESTBENCH\core\test_schemas.py:4
CAPABILITY\TESTBENCH\core\test_schemas.py:4
  D:\CCC 2.0\AI\agent-governance-system\CAPABILITY\TESTBENCH\core\test_schemas.py:4: DeprecationWarning: jsonschema.RefResolver is deprecated as of v4.18.0, in favor of the https://github.com/python-jsonschema/referencing library, which provides more compliant referencing behavior as well as more flexible APIs for customization. A future release will remove RefResolver. Please file a feature request (on referencing) if you are missing an API for the kind of customization you need.
    from jsonschema import RefResolver, Draft7Validator

CAPABILITY\PRIMITIVES\ledger.py:9
CAPABILITY\PRIMITIVES\ledger.py:9
  D:\CCC 2.0\AI\agent-governance-system\CAPABILITY\PRIMITIVES\ledger.py:9: DeprecationWarning: jsonschema.RefResolver is deprecated as of v4.18.0, in favor of the https://github.com/python-jsonschema/referencing library, which provides more compliant referencing behavior as well as more flexible APIs for customization. A future release will remove RefResolver. Please file a feature request (on referencing) if you are missing an API for the kind of customization you need.
    from jsonschema import Draft7Validator, RefResolver

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
ERROR CAPABILITY/TESTBENCH/core/test_cas_store.py
ERROR CAPABILITY/TESTBENCH/core/test_hash_toolbelt.py - NameError: name 'Path...
ERROR CAPABILITY/TESTBENCH/core/test_merkle.py
ERROR CAPABILITY/TESTBENCH/core/test_schemas.py - NameError: name '_fail' is ...
ERROR CAPABILITY/TESTBENCH/integration/test_deref_logging.py - NameError: nam...
ERROR CAPABILITY/TESTBENCH/integration/test_governance_coverage.py
ERROR CAPABILITY/TESTBENCH/integration/test_preflight.py - NameError: name 'p...
ERROR CAPABILITY/TESTBENCH/integration/test_skills_registry.py - NameError: n...
ERROR CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_capability_pins.py
ERROR CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_capability_versioning_semantics.py
ERROR CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_registry_immutability.py
ERROR CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_router_slot.py
ERROR CAPABILITY/TESTBENCH/phases/phase8_router/test_ags_phase8_model_binding.py
ERROR CAPABILITY/TESTBENCH/pipeline/test_canonical_artifacts.py - NameError: ...
ERROR CAPABILITY/TESTBENCH/pipeline/test_ledger.py - NameError: name 'sys' is...
ERROR CAPABILITY/TESTBENCH/pipeline/test_pipeline_chain.py - AttributeError: ...
ERROR CAPABILITY/TESTBENCH/pipeline/test_verifier_freeze.py - NameError: name...
ERROR CAPABILITY/TESTBENCH/spectrum/test_spectrum03_chain.py - NameError: nam...
!!!!!!!!!!!!!!!!!! Interrupted: 18 errors during collection !!!!!!!!!!!!!!!!!!!
=================== 99 tests collected, 18 errors in 0.53s ====================
