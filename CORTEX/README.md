# Cortex

The cortex is a shadow index of the repository. It allows agents and skills to query metadata about files, pages and tokens without scanning the filesystem or loading full documents into context.

The cortex consists of:

- `cortex.schema.json` - A JSON schema describing the structure of the cortex index.
- `CORTEX/_generated/cortex.json` - The current instance of the index, generated by `cortex.build.py`.
- `cortex.json` - A fallback snapshot for cases where `CORTEX/_generated/cortex.json` is not present.
- `cortex.build.py` - A script that scans the repository and produces `CORTEX/_generated/cortex.json`.
- `query.py` - A Python module providing functions to query the cortex.

Agents must use `query.py` to discover files instead of using OS calls directly. This ensures that navigation is consistent, efficient and governed by the canon.

## Generated files

The `_generated/` directory is excluded from version control (`.gitignore`). This is intentional:

- **Always rebuildable:** Run `python CORTEX/cortex.build.py` to regenerate the index at any time.
- **CI validated:** The build script runs in CI to ensure the index can always be generated from the current repo state.
- **Deterministic:** Given the same repo content and `CORTEX_BUILD_TIMESTAMP` env var, the output is identical.

The repo-tracked `cortex.json` serves as a fallback if `_generated/cortex.json` is not present.
