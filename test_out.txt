============================= test session starts =============================
platform win32 -- Python 3.11.6, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\rene_\AppData\Local\Programs\Python\Python311\python.exe
cachedir: .pytest_cache
rootdir: D:\CCC 2.0\AI\agent-governance-system
plugins: anyio-4.12.0
collecting ... collected 3 items

CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_capability_pins.py::test_capability_pinned_routes_and_verifies PASSED
CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_capability_pins.py::test_verify_rejects_unpinned_even_if_pipeline_artifact_exists FAILED
CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_capability_pins.py::test_verify_rejects_empty_pins FAILED

================================== FAILURES ===================================
________ test_verify_rejects_unpinned_even_if_pipeline_artifact_exists ________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_capability_pins.py:67: in test_verify_rejects_unpinned_even_if_pipeline_artifact_exists
    assert "CAPABILITY_NOT_PINNED" in r_verify.stdout
E   AssertionError: assert 'CAPABILITY_NOT_PINNED' in 'FAIL code=CAPABILITIES_REGISTRY_INVALID\n'
E    +  where 'FAIL code=CAPABILITIES_REGISTRY_INVALID\n' = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY.TOOLS.catalytic', 'pipeline', 'verify', '--pipeline-id', 'ags-capability-pins-verify-bypass', '--strict'], returncode=1, stdout='FAIL code=CAPABILITIES_REGISTRY_INVALID\n', stderr='').stdout
_______________________ test_verify_rejects_empty_pins ________________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_capability_pins.py:88: in test_verify_rejects_empty_pins
    assert "CAPABILITY_NOT_PINNED" in r_verify.stdout
E   AssertionError: assert 'CAPABILITY_NOT_PINNED' in 'FAIL code=CAPABILITIES_REGISTRY_INVALID\n'
E    +  where 'FAIL code=CAPABILITIES_REGISTRY_INVALID\n' = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY.TOOLS.catalytic', 'pipeline', 'verify', '--pipeline-id', 'ags-capability-pins-empty-pins', '--strict'], returncode=1, stdout='FAIL code=CAPABILITIES_REGISTRY_INVALID\n', stderr='').stdout
============================== warnings summary ===============================
CAPABILITY\PRIMITIVES\ledger.py:9
CAPABILITY\PRIMITIVES\ledger.py:9
  D:\CCC 2.0\AI\agent-governance-system\CAPABILITY\PRIMITIVES\ledger.py:9: DeprecationWarning: jsonschema.RefResolver is deprecated as of v4.18.0, in favor of the https://github.com/python-jsonschema/referencing library, which provides more compliant referencing behavior as well as more flexible APIs for customization. A future release will remove RefResolver. Please file a feature request (on referencing) if you are missing an API for the kind of customization you need.
    from jsonschema import Draft7Validator, RefResolver

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_capability_pins.py::test_verify_rejects_unpinned_even_if_pipeline_artifact_exists
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_capability_pins.py::test_verify_rejects_empty_pins
=================== 2 failed, 1 passed, 2 warnings in 1.42s ===================
