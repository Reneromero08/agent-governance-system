============================= test session starts =============================
platform win32 -- Python 3.11.6, pytest-9.0.2, pluggy-1.6.0
rootdir: D:\CCC 2.0\AI\agent-governance-system
plugins: anyio-4.12.0
collected 136 items / 7 errors

<Dir agent-governance-system>
  <Package CAPABILITY>
    <Dir TESTBENCH>
      <Dir adversarial>
        <Module test_adversarial_cas.py>
          <Function test_cas_corruption_detected_by_hash_toolbelt>
          <Function test_cas_truncation_detected_by_hash_toolbelt>
          <Function test_cas_partial_write_never_treated_as_present>
        <Module test_adversarial_ledger.py>
          <Function test_ledger_rejects_malformed_json_line>
          <Function test_ledger_rejects_truncated_last_line_mid_byte>
        <Module test_adversarial_paths.py>
          <Function test_normalize_relpath_rejects_traversal_and_absolute>
          <Function test_normalize_relpath_normalizes_separators_and_dot>
          <Function test_merkle_rejects_non_normalized_paths>
          <Function test_build_manifest_rejects_non_normalized_paths>
        <Module test_adversarial_proof_tamper.py>
          <Function test_proof_hash_tamper_fails_closed_deterministic>
          <Function test_proof_hash_tamper_fails_non_deterministic>
      <Dir core>
        <Module test_cas_store.py>
          <Function test_put_bytes_same_bytes_same_hash>
          <Function test_put_bytes_idempotent_does_not_change_bytes>
          <Function test_put_stream_matches_put_bytes>
          <Function test_large_stream_roundtrip>
          <Function test_deterministic_object_path_across_instances>
          <Function test_reject_invalid_hash_and_missing_hash>
          <Function test_normalize_relpath_accepts_and_normalizes>
      <Dir integration>
        <Module test_cortex_integration.py>
          <Function test_system1_db>
          <Function test_cortex_indexer>
          <Function test_search_functionality>
        <Module test_demo_memoization_hash_reuse.py>
          <Function test_phase2_demo_artifacts_are_falsifiable>
        <Module test_deref_logging.py>
          <Function test_deref_logging_creates_ledger_entry>
          <Function test_deref_logging_records_exact_bounds>
          <Function test_deref_logging_determinism>
          <Function test_deref_logging_no_run_context_skips_logging>
          <Function test_deref_logging_all_commands>
          <Function test_deref_logging_schema_conformance>
        <Module test_memoization.py>
          <Function test_memoization_miss_then_hit_then_invalidate>
        <Module test_packing_hygiene.py>
          <Function test_packing_hygiene>
        <Module test_preflight.py>
          <Function test_valid_jobspec_passes>
          <Function test_invalid_jobspec_schema_fails>
          <Function test_path_traversal_fails>
          <Function test_absolute_path_fails>
          <Function test_path_not_under_allowed_root_fails>
          <Function test_forbidden_path_fails>
          <Function test_input_output_overlap_fails>
          <Function test_multiple_errors_reported>
          <Function test_empty_catalytic_domains_valid>
          <Function test_empty_outputs_valid>
        <Module test_spectrum_04_05_enforcement.py>
          <Function test_canonicalization>
          <Function test_bundle_root_computation>
          <Function test_identity_verification>
          <Function test_signature_verification>
          <Function test_chain_root_computation>
          <Function test_chain_empty_check>
          <Function test_chain_duplicate_run_check>
      <Dir phases>
        <Dir phase6_governance>
          <Module test_ags_phase6_adapter_contract.py>
            <Function test_adapter_happy_path_deterministic>
            <Function test_adapter_reject_missing_command>
            <Function test_adapter_reject_hidden_side_effects>
            <Function test_adapter_reject_unbounded_deref_caps>
            <Function test_adapter_reject_non_normalized_paths>
            <Function test_adapter_reject_nondeterministic_flag_strict>
          <Module test_ags_phase6_bridge.py>
            <Function test_ags_route_deterministic_bytes>
            <Function test_ags_run_calls_verify_ok>
            <Function test_pipeline_run_creates_state_when_missing>
          <Module test_ags_phase6_capability_pins.py>
            <Function test_capability_pinned_routes_and_verifies>
            <Function test_verify_rejects_unpinned_even_if_pipeline_artifact_exists>
            <Function test_verify_rejects_empty_pins>
          <Module test_ags_phase6_capability_registry.py>
            <Function test_capability_registry_happy_unknown_and_tamper>
          <Module test_ags_phase6_capability_revokes.py>
            <Function test_revoked_capability_rejects_at_route>
            <Function test_verify_rejects_revoked_capability>
          <Module test_ags_phase6_mcp_adapter_e2e.py>
            <Function test_happy_echo>
            <Function test_fail_stderr>
            <Function test_fail_timeout>
            <Function test_fail_bloat>
            <Function test_fail_malformed_output>
            <Function test_fail_crash>
          <Module test_ags_phase6_registry_immutability.py>
            <Function test_registry_duplicate_capability_hash_rejects>
            <Function test_registry_noncanonical_json_rejects>
            <Function test_registry_tamper_detected_fail_closed>
        <Dir phase7_swarm>
          <Module test_phase7_acceptance.py>
            <Function test_swarm_chain_binds_pipeline_proofs>
            <Function test_swarm_chain_fails_on_tampered_proof>
          <Module test_swarm_reuse.py>
            <Function test_swarm_execution_elision>
          <Module test_swarm_runtime.py>
            <Function test_swarm_runtime_happy_path>
        <Dir phase8_router>
          <Module test_ags_phase8_model_binding.py>
            <Function test_ags_plan_over_output_fails_closed>
          <Module test_phase8_router_receipts.py>
            <Function test_router_receipts_created>
            <Function test_router_over_output_fails_closed>
            <Function test_router_stderr_fails_closed>
            <Function test_malformed_plan_fails_schema_validation>
            <Function test_capability_escalation_fails_closed>
      <Dir pipeline>
        <Module test_canonical_artifacts.py>
          <Function test_canonical_artifact_set_required>
          <Function test_status_state_machine>
          <Function test_proof_written_last>
        <Module test_pipeline_chain.py>
          <Function test_pipeline_chain_valid>
          <Function test_pipeline_chain_tamper>
          <Function test_pipeline_chain_reorder>
          <Function test_pipeline_chain_determinism>
        <Module test_pipeline_dag.py>
          <Function test_dag_spec_validation>
          <Function test_dag_topo_sort>
        <Module test_pipeline_verify_cli.py>
          <Function test_pipeline_verify_ok>
          <Function test_pipeline_verify_missing_artifact>
          <Function test_pipeline_verify_chain_tamper>
          <Function test_pipeline_verify_ledger_corrupt>
        <Module test_pipelines.py>
          <Function test_pipeline_init_is_deterministic_and_resume_safe>
        <Module test_proof_gating.py>
          <Function test_valid_proof_accepted>
          <Function test_proof_is_single_source_of_truth>
        <Module test_proof_wiring.py>
          <Function test_rerun_determinism_proof_and_domain_roots_bytes_identical>
          <Function test_tamper_detection_hash_mismatch>
          <Function test_path_normalization_rejects_traversal>
        <Module test_restore_proof.py>
          <Function test_identical_artifacts_verified_true>
          <Function test_hash_mismatch_verified_false>
          <Function test_missing_files_verified_false>
          <Function test_extra_files_verified_false>
          <Function test_deterministic_output>
          <Function test_proof_validates_against_schema>
          <Function test_empty_domains_verified_true>
        <Module test_restore_runner.py>
          <Function test_restore_rejects_when_verifier_strict_fails>
          <Function test_restore_success_emits_artifacts_and_matches_hashes>
          <Function test_restore_rollback_failure_returns_restore_rollback_failed>
        <Module test_runtime_guard.py>
          <Function test_allowed_write_succeeds>
          <Function test_guarded_write_text_succeeds>
          <Function test_guarded_mkdir_succeeds>
          <Function test_guarded_write_bytes_succeeds>
          <Function test_path_normalization>
          <Function test_forbidden_path_fails>
          <Function test_forbidden_path_guarded_write_fails>
          <Function test_write_outside_allowed_roots_fails>
          <Function test_path_traversal_fails>
          <Function test_absolute_path_outside_project_fails>
          <Function test_multiple_allowed_roots_work>
          <Function test_all_forbidden_paths_rejected>
          <Function test_guarded_mkdir_forbidden_fails>
        <Module test_verifier_interop.py>
          <Function test_interop_valid_bundle_byte_identical>
          <Function test_interop_tampered_bundle_reject_same_code_and_bytes>
          <Function test_interop_chain_verification_byte_identical>
          <Function test_interop_determinism_rerun_same_inputs_same_bytes>
        <Module test_verify_bundle.py>
          <Function test_valid_bundle>
          <Function test_status_failure>
          <Function test_tampered_output>
          <Function test_forbidden_artifact>
          <Function test_chain_valid>
          <Function test_chain_tamper_middle>
      <Dir spectrum>
        <Module test_spectrum02_emission.py>
          <Function test_spectrum02_emission>
        <Module test_spectrum02_resume.py>
          <Function test_spectrum02_resume>
        <Module test_validator_version_integrity.py>
          <Function test_validator_version_integrity>

=================================== ERRORS ====================================
______ ERROR collecting CAPABILITY/TESTBENCH/core/test_hash_toolbelt.py _______
ImportError while importing test module 'D:\CCC 2.0\AI\agent-governance-system\CAPABILITY\TESTBENCH\core\test_hash_toolbelt.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
C:\Users\rene_\AppData\Local\Programs\Python\Python311\Lib\importlib\__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
CAPABILITY\TESTBENCH\core\test_hash_toolbelt.py:5: in <module>
    from CAPABILITY.core.cas_store import CatalyticStore
E   ModuleNotFoundError: No module named 'CAPABILITY.core'
__________ ERROR collecting CAPABILITY/TESTBENCH/core/test_merkle.py __________
ImportError while importing test module 'D:\CCC 2.0\AI\agent-governance-system\CAPABILITY\TESTBENCH\core\test_merkle.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
C:\Users\rene_\AppData\Local\Programs\Python\Python311\Lib\importlib\__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
CAPABILITY\TESTBENCH\core\test_merkle.py:11: in <module>
    from CAPABILITY.core.test_merkle import build_manifest_root, verify_manifest_root
E   ModuleNotFoundError: No module named 'CAPABILITY.core'
_________ ERROR collecting CAPABILITY/TESTBENCH/core/test_schemas.py __________
CAPABILITY\TESTBENCH\core\test_schemas.py:13: in <module>
    def _load_json(p: Path) -> Dict[str, Any]:
                               ^^^^
E   NameError: name 'Dict' is not defined
__ ERROR collecting CAPABILITY/TESTBENCH/integration/test_skills_registry.py __
ImportError while importing test module 'D:\CCC 2.0\AI\agent-governance-system\CAPABILITY\TESTBENCH\integration\test_skills_registry.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
C:\Users\rene_\AppData\Local\Programs\Python\Python311\Lib\importlib\__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
CAPABILITY\TESTBENCH\integration\test_skills_registry.py:7: in <module>
    from CAPABILITY.core.PRIMITIVES.skills import (
E   ModuleNotFoundError: No module named 'CAPABILITY.core'
_ ERROR collecting CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_router_slot.py _
ImportError while importing test module 'D:\CCC 2.0\AI\agent-governance-system\CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_router_slot.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
C:\Users\rene_\AppData\Local\Programs\Python\Python311\Lib\importlib\__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_router_slot.py:11: in <module>
    from PHASES.phase6_governance.specific_module import SpecificFunction
E   ModuleNotFoundError: No module named 'PHASES'
________ ERROR collecting CAPABILITY/TESTBENCH/pipeline/test_ledger.py ________
ImportError while importing test module 'D:\CCC 2.0\AI\agent-governance-system\CAPABILITY\TESTBENCH\pipeline\test_ledger.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
C:\Users\rene_\AppData\Local\Programs\Python\Python311\Lib\importlib\__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
CAPABILITY\TESTBENCH\pipeline\test_ledger.py:11: in <module>
    from CAPABILITY.core.PRIMITIVES.ledger import Ledger
E   ModuleNotFoundError: No module named 'CAPABILITY.core'
___ ERROR collecting CAPABILITY/TESTBENCH/pipeline/test_verifier_freeze.py ____
CAPABILITY\TESTBENCH\pipeline\test_verifier_freeze.py:1: in <module>
    WRONG: REPO_ROOT = Path(__file__).resolve().parents[2]
                       ^^^^
E   NameError: name 'Path' is not defined
============================== warnings summary ===============================
CAPABILITY\PRIMITIVES\ledger.py:9
CAPABILITY\PRIMITIVES\ledger.py:9
  D:\CCC 2.0\AI\agent-governance-system\CAPABILITY\PRIMITIVES\ledger.py:9: DeprecationWarning: jsonschema.RefResolver is deprecated as of v4.18.0, in favor of the https://github.com/python-jsonschema/referencing library, which provides more compliant referencing behavior as well as more flexible APIs for customization. A future release will remove RefResolver. Please file a feature request (on referencing) if you are missing an API for the kind of customization you need.
    from jsonschema import Draft7Validator, RefResolver

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
ERROR CAPABILITY/TESTBENCH/core/test_hash_toolbelt.py
ERROR CAPABILITY/TESTBENCH/core/test_merkle.py
ERROR CAPABILITY/TESTBENCH/core/test_schemas.py - NameError: name 'Dict' is n...
ERROR CAPABILITY/TESTBENCH/integration/test_skills_registry.py
ERROR CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_router_slot.py
ERROR CAPABILITY/TESTBENCH/pipeline/test_ledger.py
ERROR CAPABILITY/TESTBENCH/pipeline/test_verifier_freeze.py - NameError: name...
!!!!!!!!!!!!!!!!!!! Interrupted: 7 errors during collection !!!!!!!!!!!!!!!!!!!
=================== 136 tests collected, 7 errors in 0.42s ====================
