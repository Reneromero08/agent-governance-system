============================= test session starts =============================
platform win32 -- Python 3.11.6, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\rene_\AppData\Local\Programs\Python\Python311\python.exe
cachedir: .pytest_cache
rootdir: D:\CCC 2.0\AI\agent-governance-system
configfile: pytest.ini
plugins: anyio-4.12.0
collecting ... collected 16 items

CAPABILITY/TESTBENCH/test_ags_phase6_capability_pins.py::test_capability_pinned_routes_and_verifies FAILED [  6%]
CAPABILITY/TESTBENCH/test_ags_phase6_capability_pins.py::test_known_but_unpinned_rejects_at_route PASSED [ 12%]
CAPABILITY/TESTBENCH/test_ags_phase6_capability_pins.py::test_verify_rejects_unpinned_even_if_pipeline_artifact_exists FAILED [ 18%]
CAPABILITY/TESTBENCH/test_ags_phase6_capability_revokes.py::test_revoked_capability_rejects_at_route PASSED [ 25%]
CAPABILITY/TESTBENCH/test_ags_phase6_capability_revokes.py::test_verify_rejects_revoked_capability FAILED [ 31%]
CAPABILITY/TESTBENCH/test_ags_phase6_capability_revokes.py::test_verify_passes_when_not_revoked FAILED [ 37%]
CAPABILITY/TESTBENCH/test_ags_phase6_capability_revokes.py::test_historical_pipeline_verifies_after_revocation PASSED [ 43%]
CAPABILITY/TESTBENCH/test_ags_phase6_capability_versioning_semantics.py::test_capability_versioning_in_place_upgrade_rejected PASSED [ 50%]
CAPABILITY/TESTBENCH/test_ags_phase6_registry_immutability.py::test_registry_duplicate_capability_hash_rejects PASSED [ 56%]
CAPABILITY/TESTBENCH/test_ags_phase6_registry_immutability.py::test_registry_noncanonical_json_rejects PASSED [ 62%]
CAPABILITY/TESTBENCH/test_ags_phase6_registry_immutability.py::test_registry_tamper_detected_fail_closed PASSED [ 68%]
CAPABILITY/TESTBENCH/test_phase8_router_receipts.py::test_router_receipts_created FAILED [ 75%]
CAPABILITY/TESTBENCH/test_phase8_router_receipts.py::test_router_over_output_fails_closed FAILED [ 81%]
CAPABILITY/TESTBENCH/test_phase8_router_receipts.py::test_router_stderr_fails_closed FAILED [ 87%]
CAPABILITY/TESTBENCH/test_phase8_router_receipts.py::test_malformed_plan_fails_schema_validation PASSED [ 93%]
CAPABILITY/TESTBENCH/test_phase8_router_receipts.py::test_capability_escalation_fails_closed FAILED [100%]

================================== FAILURES ===================================
_________________ test_capability_pinned_routes_and_verifies __________________

tmp_path = WindowsPath('C:/Users/rene_/AppData/Local/Temp/pytest-of-Reneshizzle/pytest-265/test_capability_pinned_routes_0')

    def test_capability_pinned_routes_and_verifies(tmp_path: Path) -> None:
        pipeline_id = "ags-capability-pins-ok"
        plan_path = tmp_path / "plan.json"
        plan_path.write_text(json.dumps({"plan_version": "1.0", "steps": [{"step_id": "s1", "capability_hash": CAP}]}), encoding="utf-8")
    
        pins_path = tmp_path / "PINS.json"
        pins_path.write_bytes(_canon({"pins_version": "1.0.0", "allowed_capabilities": [CAP]}))
    
        env = dict(os.environ)
        env["CATALYTIC_PINS_PATH"] = str(pins_path)
    
        # The v1 capability is pinned to a concrete ant-worker command that expects these files.
        reg_root = REPO_ROOT / "LAW" / "CONTRACTS" / "_runs" / "_tmp" / "phase65_registry"
        task_path = reg_root / "task.json"
        in_path = reg_root / "in.txt"
        out_path = reg_root / "out.txt"
        (reg_root / "domain").mkdir(parents=True, exist_ok=True)
        in_path.write_bytes(b"PHASE66\n")
        task_path.write_text(
            json.dumps(
                {
                    "task_id": "ant-worker-copy",
                    "task_type": "file_operation",
                    "operation": "copy",
                    "verify_integrity": True,
                    "timestamp": "CATALYTIC-DPT-02_CONFIG",
                    "files": [{"source": str(in_path), "destination": str(out_path)}],
                }
            ),
            encoding="utf-8",
        )
    
        pipeline_dir = REPO_ROOT / "LAW" / "CONTRACTS" / "_runs" / "_pipelines" / pipeline_id
        run_dir = REPO_ROOT / "LAW" / "CONTRACTS" / "_runs" / "pipeline-ags-capability-pins-ok-s1-a1"
    
        try:
            _rm(pipeline_dir)
            _rm(run_dir)
            _rm(reg_root)
            (reg_root / "domain").mkdir(parents=True, exist_ok=True)
            in_path.write_bytes(b"PHASE66\n")
            task_path.write_text(
                json.dumps(
                    {
                        "task_id": "ant-worker-copy",
                        "task_type": "file_operation",
                        "operation": "copy",
                        "verify_integrity": True,
                        "timestamp": "CATALYTIC-DPT-02_CONFIG",
                        "files": [{"source": str(in_path), "destination": str(out_path)}],
                    }
                ),
                encoding="utf-8",
            )
    
            r_route = _run([sys.executable, "-m", "CAPABILITY.TOOLS.ags", "route", "--plan", str(plan_path), "--pipeline-id", pipeline_id], env=env)
            assert r_route.returncode == 0, r_route.stdout + r_route.stderr
    
            r_run = _run([sys.executable, "-m", "CAPABILITY.TOOLS.ags", "run", "--pipeline-id", pipeline_id, "--strict", "--allow-dirty-tracked"], env=env)
>           assert r_run.returncode == 0, r_run.stdout + r_run.stderr
E           AssertionError: {"verdict":"ALLOW","reasons":[],"normalized_paths":{"read":[],"write":["LAW/CONTRACTS/_runs"]},"policy_version":"1"}
E             [grok-executor] [OK] Copied: D:\CCC 2.0\AI\agent-governance-system\LAW\CONTRACTS\_runs\_tmp\phase65_registry\out.txt (hash verified: True)
E             
E             [grok-executor] Task: ant-worker-copy
E             [grok-executor] Status: success
E             [grok-executor] Operations: 1
E             [grok-executor] Errors: 0
E             [grok-executor] Ledger: D:\CCC 2.0\AI\agent-governance-system\CAPABILITY\SKILLS\CONTRACTS\_runs\ant-worker-copy-06b415cc4090
E             [catalytic] Starting catalytic run: pipeline-ags-capability-pins-ok-s1-a1
E             [catalytic] Phase 0: Preflight validation...
E             [catalytic] Preflight passed: JobSpec is valid
E             [catalytic] Phase 1: Capturing pre-snapshots...
E             [catalytic] Snapshots pre: LAW\CONTRACTS\_runs\_tmp\phase65_registry\domain (0 files)
E             [catalytic] Memoization MISS: dd9e593f4fdf523dc12c5a7ec48b2cd26059de923d270cb1ef7e3b444acf1c97
E             [catalytic] Phase 2: Executing command: python CAPABILITY/SKILLS/agents/ant-worker/scripts/run.py LAW/CONTRACTS/_runs/_tmp/phase65_registry/task.json LAW/CONTRACTS/_runs/_tmp/phase65_registry/result.json
E             [catalytic] Command exited with code 0
E             [catalytic] Phase 3: Capturing post-snapshots...
E             [catalytic] Snapshots post: LAW\CONTRACTS\_runs\_tmp\phase65_registry\domain (0 files)
E             [catalytic] Phase 4: Verifying restoration...
E             [catalytic] SUCCESS: Catalytic domains fully restored
E             [catalytic] Phase 5: Writing canonical artifact set...
E             [catalytic] Canonical artifact set written to D:\CCC 2.0\AI\agent-governance-system\LAW\CONTRACTS\_runs\pipeline-ags-capability-pins-ok-s1-a1
E             [catalytic] PROOF.json: verified=True, condition=RESTORED_IDENTICAL
E             [catalytic] Run completed successfully with verified restoration.
E             pipeline_id: ags-capability-pins-ok
E             steps_total: 1
E             steps_completed: 1
E             next_step: NONE
E             s1: DONE run_id=pipeline-ags-capability-pins-ok-s1-a1
E             FAIL code=CAPABILITIES_REGISTRY_INVALID
E             AGS: running pipeline
E             AGS: verifying pipeline (fail-closed)
E             FAIL pipeline verify rc=1
E             DEBUG: execute cmd=['python', 'CAPABILITY/SKILLS/agents/ant-worker/scripts/run.py', 'LAW/CONTRACTS/_runs/_tmp/phase65_registry/task.json', 'LAW/CONTRACTS/_runs/_tmp/phase65_registry/result.json']
E             
E           assert 1 == 0
E            +  where 1 = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY.TOOLS.ags', 'run', '--pipeline-id', 'ags-capability-pins-ok', '--strict', '--allow-dirty-tracked'], returncode=1, stdout='{"verdict":"ALLOW","reasons":[],"normalized_paths":{"read":[],"write":["LAW/CONTRACTS/_runs"]},"policy_version":"1"}\n[grok-executor] [OK] Copied: D:\\CCC 2.0\\AI\\agent-governance-system\\LAW\\CONTRACTS\\_runs\\_tmp\\phase65_registry\\out.txt (hash verified: True)\n\n[grok-executor] Task: ant-worker-copy\n[grok-executor] Status: success\n[grok-executor] Operations: 1\n[grok-executor] Errors: 0\n[grok-executor] Ledger: D:\\CCC 2.0\\AI\\agent-governance-system\\CAPABILITY\\SKILLS\\CONTRACTS\\_runs\\ant-worker-copy-06b415cc4090\n[catalytic] Starting catalytic run: pipeline-ags-capability-pins-ok-s1-a1\n[catalytic] Phase 0: Preflight validation...\n[catalytic] Preflight passed: JobSpec is valid\n[catalytic] Phase 1: Capturing pre-snapshots...\n[catalytic] Snapshots pre: LAW\\CONTRACTS\\_runs\\_tmp\\phase65_registry\\domain (0 files)\n[catalytic] Memoization MISS: dd9e593f4fdf523dc12c5a7ec48b2cd26059de923d270cb1ef7e3b444acf1c97\n[catalytic] Phase 2: Executing command: python CAPABILITY/SKILLS/agents/ant-worker/scripts/run.py LAW/CONTRACTS/_runs/_tmp/phase65_registry/task.json LAW/CONTRACTS/_runs/_tmp/phase65_registry/result.json\n[catalytic] Command exited with code 0\n[catalytic] Phase 3: Capturing post-snapshots...\n[catalytic] Snapshots post: LAW\\CONTRACTS\\_runs\\_tmp\\phase65_registry\\domain (0 files)\n[catalytic] Phase 4: Verifying restoration...\n[catalytic] SUCCESS: Catalytic domains fully restored\n[catalytic] Phase 5: Writing canonical artifact set...\n[catalytic] Canonical artifact set written to D:\\CCC 2.0\\AI\\agent-governance-system\\LAW\\CONTRACTS\\_runs\\pipeline-ags-capability-pins-ok-s1-a1\n[catalytic] PROOF.json: verified=True, condition=RESTORED_IDENTICAL\n[catalytic] Run completed successfully with verified restoration.\npipeline_id: ags-capability-pins-ok\nsteps_total: 1\nsteps_completed: 1\nnext_step: NONE\ns1: DONE run_id=pipeline-ags-capability-pins-ok-s1-a1\nFAIL code=CAPABILITIES_REGISTRY_INVALID\nAGS: running pipeline\nAGS: verifying pipeline (fail-closed)\nFAIL pipeline verify rc=1\n', stderr="DEBUG: execute cmd=['python', 'CAPABILITY/SKILLS/agents/ant-worker/scripts/run.py', 'LAW/CONTRACTS/_runs/_tmp/phase65_registry/task.json', 'LAW/CONTRACTS/_runs/_tmp/phase65_registry/result.json']\n").returncode

CAPABILITY\TESTBENCH\test_ags_phase6_capability_pins.py:92: AssertionError
________ test_verify_rejects_unpinned_even_if_pipeline_artifact_exists ________

tmp_path = WindowsPath('C:/Users/rene_/AppData/Local/Temp/pytest-of-Reneshizzle/pytest-265/test_verify_rejects_unpinned_e0')

    def test_verify_rejects_unpinned_even_if_pipeline_artifact_exists(tmp_path: Path) -> None:
        pipeline_id = "ags-capability-pins-verify-bypass"
        pipeline_dir = REPO_ROOT / "LAW" / "CONTRACTS" / "_runs" / "_pipelines" / pipeline_id
        run_id = "pipeline-ags-capability-pins-verify-bypass-s1-a1"
        run_dir = REPO_ROOT / "LAW" / "CONTRACTS" / "_runs" / run_id
    
        pins_path = tmp_path / "PINS.json"
        pins_path.write_bytes(_canon({"pins_version": "1.0.0", "allowed_capabilities": []}))
    
        env = dict(os.environ)
        env["CATALYTIC_PINS_PATH"] = str(pins_path)
    
        reg_root = REPO_ROOT / "LAW" / "CONTRACTS" / "_runs" / "_tmp" / "phase65_registry"
        task_path = reg_root / "task.json"
        in_path = reg_root / "in.txt"
        out_path = reg_root / "out.txt"
    
        try:
            _rm(pipeline_dir)
            _rm(run_dir)
            _rm(reg_root)
            (reg_root / "domain").mkdir(parents=True, exist_ok=True)
            in_path.write_bytes(b"PHASE66\n")
            task_path.write_text(
                json.dumps(
                    {
                        "task_id": "ant-worker-copy",
                        "task_type": "file_operation",
                        "operation": "copy",
                        "verify_integrity": True,
                        "timestamp": "CATALYTIC-DPT-02_CONFIG",
                        "files": [{"source": str(in_path), "destination": str(out_path)}],
                    }
                ),
                encoding="utf-8",
            )
    
            # Create a real run with the pinned capability (using default pins).
            plan_ok = tmp_path / "plan_ok.json"
            plan_ok.write_text(json.dumps({"plan_version": "1.0", "steps": [{"step_id": "s1", "capability_hash": CAP}]}), encoding="utf-8")
            r_route_ok = subprocess.run(
                [sys.executable, "-m", "CAPABILITY.TOOLS.ags", "route", "--plan", str(plan_ok), "--pipeline-id", pipeline_id],
                cwd=str(REPO_ROOT),
                capture_output=True,
                text=True,
            )
>           assert r_route_ok.returncode == 0, r_route_ok.stdout + r_route_ok.stderr
E           AssertionError: ERROR: REGISTRY_NONCANONICAL
E             
E           assert 2 == 0
E            +  where 2 = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY.TOOLS.ags', 'route', '--plan', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_verify_rejects_unpinned_e0\\plan_ok.json', '--pipeline-id', 'ags-capability-pins-verify-bypass'], returncode=2, stdout='', stderr='ERROR: REGISTRY_NONCANONICAL\n').returncode

CAPABILITY\TESTBENCH\test_ags_phase6_capability_pins.py:170: AssertionError
___________________ test_verify_rejects_revoked_capability ____________________

tmp_path = WindowsPath('C:/Users/rene_/AppData/Local/Temp/pytest-of-Reneshizzle/pytest-265/test_verify_rejects_revoked_ca0')

    def test_verify_rejects_revoked_capability(tmp_path):
        """
        Pipeline verify must reject if capability is revoked, even if route succeeded earlier.
    
        NOTE: This test calls catalytic pipeline verify directly. Without a full pipeline run,
        the verify will fail with CHAIN_MISSING before reaching the revocation check.
        The key governance gate is at ROUTE time (tested separately).
    
        This test verifies that:
        1. Route succeeds when not revoked
        2. Verify fails (for any reason) when revoked - CHAIN_MISSING is acceptable
           because a real pipeline would have been blocked at route time
        """
        pipeline_id = "test-verify-revocation"
        pipeline_dir = REPO_ROOT / "LAW" / "CONTRACTS" / "_runs" / "_pipelines" / pipeline_id
    
        # Create revokes files
        empty_revokes = tmp_path / "REVOKES_EMPTY.json"
        empty_revokes.write_bytes(_canon({"revokes_version": "1.0.0", "revoked_capabilities": []}))
    
        revoked_revokes = tmp_path / "REVOKES_REVOKED.json"
        revoked_revokes.write_bytes(_canon({"revokes_version": "1.0.0", "revoked_capabilities": [CAP]}))
    
        # Env with no revocation (for route)
        env_route = dict(os.environ)
        env_route["CATALYTIC_CAPABILITIES_PATH"] = str(REPO_ROOT / "LAW" / "CANON" / "CAPABILITIES.json")
        env_route["CATALYTIC_PINS_PATH"] = str(REPO_ROOT / "LAW" / "CANON" / "CAPABILITY_PINS.json")
        env_route["CATALYTIC_REVOKES_PATH"] = str(empty_revokes)
    
        plan_path = tmp_path / "plan.json"
        plan_path.write_text(json.dumps({
            "plan_version": "1.0",
            "steps": [{"step_id": "s1", "capability_hash": CAP}]
        }))
    
        try:
            _rm(pipeline_dir)
    
            # Route should succeed (capability not revoked yet)
            cmd_route = [sys.executable, "-m", "CAPABILITY.TOOLS.ags", "route", "--plan", str(plan_path), "--pipeline-id", pipeline_id]
            r_route = _run(cmd_route, env_route)
>           assert r_route.returncode == 0, f"Route should succeed: {r_route.stderr}"
E           AssertionError: Route should succeed: ERROR: REGISTRY_NONCANONICAL
E             
E           assert 2 == 0
E            +  where 2 = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY.TOOLS.ags', 'route', '--plan', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_verify_rejects_revoked_ca0\\plan.json', '--pipeline-id', 'test-verify-revocation'], returncode=2, stdout='', stderr='ERROR: REGISTRY_NONCANONICAL\n').returncode

CAPABILITY\TESTBENCH\test_ags_phase6_capability_revokes.py:108: AssertionError
_____________________ test_verify_passes_when_not_revoked _____________________

tmp_path = WindowsPath('C:/Users/rene_/AppData/Local/Temp/pytest-of-Reneshizzle/pytest-265/test_verify_passes_when_not_re0')

    def test_verify_passes_when_not_revoked(tmp_path):
        """
        Pipeline verify should not falsely report REVOKED_CAPABILITY when capability is not revoked.
        """
        pipeline_id = "test-verify-no-revocation"
        pipeline_dir = REPO_ROOT / "LAW" / "CONTRACTS" / "_runs" / "_pipelines" / pipeline_id
    
        # Empty revokes
        empty_revokes = tmp_path / "REVOKES_EMPTY.json"
        empty_revokes.write_bytes(_canon({"revokes_version": "1.0.0", "revoked_capabilities": []}))
    
        env = dict(os.environ)
        env["CATALYTIC_CAPABILITIES_PATH"] = str(REPO_ROOT / "LAW" / "CANON" / "CAPABILITIES.json")
        env["CATALYTIC_PINS_PATH"] = str(REPO_ROOT / "LAW" / "CANON" / "CAPABILITY_PINS.json")
        env["CATALYTIC_REVOKES_PATH"] = str(empty_revokes)
    
        plan_path = tmp_path / "plan.json"
        plan_path.write_text(json.dumps({
            "plan_version": "1.0",
            "steps": [{"step_id": "s1", "capability_hash": CAP}]
        }))
    
        try:
            _rm(pipeline_dir)
    
            # Route
            cmd_route = [sys.executable, "-m", "CAPABILITY.TOOLS.ags", "route", "--plan", str(plan_path), "--pipeline-id", pipeline_id]
            r_route = _run(cmd_route, env)
>           assert r_route.returncode == 0, f"Route should succeed: {r_route.stderr}"
E           AssertionError: Route should succeed: ERROR: REGISTRY_NONCANONICAL
E             
E           assert 2 == 0
E            +  where 2 = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY.TOOLS.ags', 'route', '--plan', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_verify_passes_when_not_re0\\plan.json', '--pipeline-id', 'test-verify-no-revocation'], returncode=2, stdout='', stderr='ERROR: REGISTRY_NONCANONICAL\n').returncode

CAPABILITY\TESTBENCH\test_ags_phase6_capability_revokes.py:157: AssertionError
________________________ test_router_receipts_created _________________________

tmp_path = WindowsPath('C:/Users/rene_/AppData/Local/Temp/pytest-of-Reneshizzle/pytest-265/test_router_receipts_created0')

    def test_router_receipts_created(tmp_path):
        """Router execution must create receipt artifacts."""
        # Create a simple router that outputs a valid plan
        router_script = tmp_path / "router.py"
        router_script.write_text(
            """
    import json
    import sys
    plan = {
        "plan_version": "1.0",
        "steps": [
            {
                "step_id": "test-step",
                "command": ["echo", "hello"],
                "jobspec": {
                    "job_id": "test-job",
                    "phase": 8,
                    "task_type": "test_execution",
                    "intent": "Test router receipts",
                    "inputs": {},
                    "outputs": {
                        "durable_paths": [],
                        "validation_criteria": {}
                    },
                    "catalytic_domains": [],
                    "determinism": "deterministic"
                }
            }
        ]
    }
    sys.stdout.write(json.dumps(plan))
    """,
            encoding="utf-8",
        )
    
        plan_output = tmp_path / "plan.json"
        receipt_dir = tmp_path / ".router_receipts"
    
        try:
            _rm(receipt_dir)
    
            cmd = [
                sys.executable,
                "-m",
                "TOOLS.ags",
                "plan",
                "--router",
                sys.executable,
                "--router-arg",
                str(router_script),
                "--out",
                str(plan_output),
            ]
            r = _run(cmd)
    
>           assert r.returncode == 0, f"Router should succeed: {r.stderr}"
E           AssertionError: Router should succeed: C:\Users\rene_\AppData\Local\Programs\Python\Python311\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')
E             
E           assert 1 == 0
E            +  where 1 = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'TOOLS.ags', 'plan', '--router', 'C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '--router-arg', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_router_receipts_created0\\router.py', '--out', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_router_receipts_created0\\plan.json'], returncode=1, stdout='', stderr="C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n").returncode

CAPABILITY\TESTBENCH\test_phase8_router_receipts.py:92: AssertionError
____________________ test_router_over_output_fails_closed _____________________

tmp_path = WindowsPath('C:/Users/rene_/AppData/Local/Temp/pytest-of-Reneshizzle/pytest-265/test_router_over_output_fails_0')

    def test_router_over_output_fails_closed(tmp_path):
        """Router producing too much output must fail closed."""
        # Create a router that outputs excessive data
        router_script = tmp_path / "router_spam.py"
        router_script.write_text(
            """
    import sys
    # Output way more than the default max (10MB)
    for i in range(100000):
        sys.stdout.write("x" * 1000)
    """,
            encoding="utf-8",
        )
    
        plan_output = tmp_path / "plan.json"
    
        cmd = [
            sys.executable,
            "-m",
            "TOOLS.ags",
            "plan",
            "--router",
            sys.executable,
            "--router-arg",
            str(router_script),
            "--out",
            str(plan_output),
        ]
        r = _run(cmd)
    
        assert r.returncode != 0, "Router with excessive output should fail"
>       assert "ROUTER_OUTPUT_TOO_LARGE" in (r.stderr + r.stdout)
E       assert 'ROUTER_OUTPUT_TOO_LARGE' in ("C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n" + '')
E        +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'TOOLS.ags', 'plan', '--router', 'C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '--router-arg', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_router_over_output_fails_0\\router_spam.py', '--out', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_router_over_output_fails_0\\plan.json'], returncode=1, stdout='', stderr="C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n").stderr
E        +  and   '' = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'TOOLS.ags', 'plan', '--router', 'C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '--router-arg', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_router_over_output_fails_0\\router_spam.py', '--out', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_router_over_output_fails_0\\plan.json'], returncode=1, stdout='', stderr="C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n").stdout

CAPABILITY\TESTBENCH\test_phase8_router_receipts.py:158: AssertionError
_______________________ test_router_stderr_fails_closed _______________________

tmp_path = WindowsPath('C:/Users/rene_/AppData/Local/Temp/pytest-of-Reneshizzle/pytest-265/test_router_stderr_fails_close0')

    def test_router_stderr_fails_closed(tmp_path):
        """Router producing stderr must fail closed."""
        router_script = tmp_path / "router_stderr.py"
        router_script.write_text(
            """
    import sys
    import json
    sys.stderr.write("ERROR: something went wrong\\n")
    plan = {"plan_version": "1.0", "steps": []}
    sys.stdout.write(json.dumps(plan))
    """,
            encoding="utf-8",
        )
    
        plan_output = tmp_path / "plan.json"
    
        cmd = [
            sys.executable,
            "-m",
            "TOOLS.ags",
            "plan",
            "--router",
            sys.executable,
            "--router-arg",
            str(router_script),
            "--out",
            str(plan_output),
        ]
        r = _run(cmd)
    
        assert r.returncode != 0, "Router with stderr should fail"
>       assert "ROUTER_STDERR_NOT_EMPTY" in (r.stderr + r.stdout)
E       assert 'ROUTER_STDERR_NOT_EMPTY' in ("C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n" + '')
E        +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'TOOLS.ags', 'plan', '--router', 'C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '--router-arg', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_router_stderr_fails_close0\\router_stderr.py', '--out', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_router_stderr_fails_close0\\plan.json'], returncode=1, stdout='', stderr="C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n").stderr
E        +  and   '' = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'TOOLS.ags', 'plan', '--router', 'C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '--router-arg', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_router_stderr_fails_close0\\router_stderr.py', '--out', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_router_stderr_fails_close0\\plan.json'], returncode=1, stdout='', stderr="C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n").stdout

CAPABILITY\TESTBENCH\test_phase8_router_receipts.py:192: AssertionError
___________________ test_capability_escalation_fails_closed ___________________

tmp_path = WindowsPath('C:/Users/rene_/AppData/Local/Temp/pytest-of-Reneshizzle/pytest-265/test_capability_escalation_fai0')

    def test_capability_escalation_fails_closed(tmp_path):
        """Router attempting capability escalation must fail closed."""
        # Create a router that tries to use a revoked capability
        router_script = tmp_path / "router_escalate.py"
        router_script.write_text(
            """
    import json
    import sys
    # Try to use a capability that's revoked
    plan = {
        "plan_version": "1.0",
        "steps": [{
            "step_id": "escalate",
            "capability_hash": "4f81ae57f3d1c61488c71a9042b041776dd463e6334568333321d15b6b7d78fc"
        }]
    }
    sys.stdout.write(json.dumps(plan))
    """,
            encoding="utf-8",
        )
    
        # Create a revokes file
        revokes_file = tmp_path / "REVOKES.json"
        revokes_file.write_bytes(
            json.dumps(
                {
                    "revokes_version": "1.0.0",
                    "revoked_capabilities": [
                        "4f81ae57f3d1c61488c71a9042b041776dd463e6334568333321d15b6b7d78fc"
                    ],
                },
                sort_keys=True,
                separators=(",", ":"),
            ).encode("utf-8")
        )
    
        plan_output = tmp_path / "plan.json"
    
        env = dict(os.environ)
        env["CATALYTIC_CAPABILITIES_PATH"] = str(
            REPO_ROOT / "LAW" / "CANON" / "CAPABILITIES.json"
        )
        env["CATALYTIC_PINS_PATH"] = str(
            REPO_ROOT / "LAW" / "CANON" / "CAPABILITY_PINS.json"
        )
        env["CATALYTIC_REVOKES_PATH"] = str(revokes_file)
    
        cmd = [
            sys.executable,
            "-m",
            "TOOLS.ags",
            "plan",
            "--router",
            sys.executable,
            "--router-arg",
            str(router_script),
            "--out",
            str(plan_output),
        ]
        r = _run(cmd, env)
    
        assert r.returncode != 0, "Router with revoked capability should fail"
>       assert "REVOKED_CAPABILITY" in (r.stderr + r.stdout)
E       assert 'REVOKED_CAPABILITY' in ("C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n" + '')
E        +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'TOOLS.ags', 'plan', '--router', 'C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '--router-arg', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_capability_escalation_fai0\\router_escalate.py', '--out', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_capability_escalation_fai0\\plan.json'], returncode=1, stdout='', stderr="C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n").stderr
E        +  and   '' = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'TOOLS.ags', 'plan', '--router', 'C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '--router-arg', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_capability_escalation_fai0\\router_escalate.py', '--out', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_capability_escalation_fai0\\plan.json'], returncode=1, stdout='', stderr="C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n").stdout

CAPABILITY\TESTBENCH\test_phase8_router_receipts.py:288: AssertionError
=========================== short test summary info ===========================
FAILED CAPABILITY/TESTBENCH/test_ags_phase6_capability_pins.py::test_capability_pinned_routes_and_verifies - AssertionError: {"verdict":"ALLOW","reasons":[],"normalized_paths":{"read":[],"write":["LAW/CONTRACTS/_runs"]},"policy_version":"1"}
  [grok-executor] [OK] Copied: D:\CCC 2.0\AI\agent-governance-system\LAW\CONTRACTS\_runs\_tmp\phase65_registry\out.txt (hash verified: True)
  
  [grok-executor] Task: ant-worker-copy
  [grok-executor] Status: success
  [grok-executor] Operations: 1
  [grok-executor] Errors: 0
  [grok-executor] Ledger: D:\CCC 2.0\AI\agent-governance-system\CAPABILITY\SKILLS\CONTRACTS\_runs\ant-worker-copy-06b415cc4090
  [catalytic] Starting catalytic run: pipeline-ags-capability-pins-ok-s1-a1
  [catalytic] Phase 0: Preflight validation...
  [catalytic] Preflight passed: JobSpec is valid
  [catalytic] Phase 1: Capturing pre-snapshots...
  [catalytic] Snapshots pre: LAW\CONTRACTS\_runs\_tmp\phase65_registry\domain (0 files)
  [catalytic] Memoization MISS: dd9e593f4fdf523dc12c5a7ec48b2cd26059de923d270cb1ef7e3b444acf1c97
  [catalytic] Phase 2: Executing command: python CAPABILITY/SKILLS/agents/ant-worker/scripts/run.py LAW/CONTRACTS/_runs/_tmp/phase65_registry/task.json LAW/CONTRACTS/_runs/_tmp/phase65_registry/result.json
  [catalytic] Command exited with code 0
  [catalytic] Phase 3: Capturing post-snapshots...
  [catalytic] Snapshots post: LAW\CONTRACTS\_runs\_tmp\phase65_registry\domain (0 files)
  [catalytic] Phase 4: Verifying restoration...
  [catalytic] SUCCESS: Catalytic domains fully restored
  [catalytic] Phase 5: Writing canonical artifact set...
  [catalytic] Canonical artifact set written to D:\CCC 2.0\AI\agent-governance-system\LAW\CONTRACTS\_runs\pipeline-ags-capability-pins-ok-s1-a1
  [catalytic] PROOF.json: verified=True, condition=RESTORED_IDENTICAL
  [catalytic] Run completed successfully with verified restoration.
  pipeline_id: ags-capability-pins-ok
  steps_total: 1
  steps_completed: 1
  next_step: NONE
  s1: DONE run_id=pipeline-ags-capability-pins-ok-s1-a1
  FAIL code=CAPABILITIES_REGISTRY_INVALID
  AGS: running pipeline
  AGS: verifying pipeline (fail-closed)
  FAIL pipeline verify rc=1
  DEBUG: execute cmd=['python', 'CAPABILITY/SKILLS/agents/ant-worker/scripts/run.py', 'LAW/CONTRACTS/_runs/_tmp/phase65_registry/task.json', 'LAW/CONTRACTS/_runs/_tmp/phase65_registry/result.json']
  
assert 1 == 0
 +  where 1 = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY.TOOLS.ags', 'run', '--pipeline-id', 'ags-capability-pins-ok', '--strict', '--allow-dirty-tracked'], returncode=1, stdout='{"verdict":"ALLOW","reasons":[],"normalized_paths":{"read":[],"write":["LAW/CONTRACTS/_runs"]},"policy_version":"1"}\n[grok-executor] [OK] Copied: D:\\CCC 2.0\\AI\\agent-governance-system\\LAW\\CONTRACTS\\_runs\\_tmp\\phase65_registry\\out.txt (hash verified: True)\n\n[grok-executor] Task: ant-worker-copy\n[grok-executor] Status: success\n[grok-executor] Operations: 1\n[grok-executor] Errors: 0\n[grok-executor] Ledger: D:\\CCC 2.0\\AI\\agent-governance-system\\CAPABILITY\\SKILLS\\CONTRACTS\\_runs\\ant-worker-copy-06b415cc4090\n[catalytic] Starting catalytic run: pipeline-ags-capability-pins-ok-s1-a1\n[catalytic] Phase 0: Preflight validation...\n[catalytic] Preflight passed: JobSpec is valid\n[catalytic] Phase 1: Capturing pre-snapshots...\n[catalytic] Snapshots pre: LAW\\CONTRACTS\\_runs\\_tmp\\phase65_registry\\domain (0 files)\n[catalytic] Memoization MISS: dd9e593f4fdf523dc12c5a7ec48b2cd26059de923d270cb1ef7e3b444acf1c97\n[catalytic] Phase 2: Executing command: python CAPABILITY/SKILLS/agents/ant-worker/scripts/run.py LAW/CONTRACTS/_runs/_tmp/phase65_registry/task.json LAW/CONTRACTS/_runs/_tmp/phase65_registry/result.json\n[catalytic] Command exited with code 0\n[catalytic] Phase 3: Capturing post-snapshots...\n[catalytic] Snapshots post: LAW\\CONTRACTS\\_runs\\_tmp\\phase65_registry\\domain (0 files)\n[catalytic] Phase 4: Verifying restoration...\n[catalytic] SUCCESS: Catalytic domains fully restored\n[catalytic] Phase 5: Writing canonical artifact set...\n[catalytic] Canonical artifact set written to D:\\CCC 2.0\\AI\\agent-governance-system\\LAW\\CONTRACTS\\_runs\\pipeline-ags-capability-pins-ok-s1-a1\n[catalytic] PROOF.json: verified=True, condition=RESTORED_IDENTICAL\n[catalytic] Run completed successfully with verified restoration.\npipeline_id: ags-capability-pins-ok\nsteps_total: 1\nsteps_completed: 1\nnext_step: NONE\ns1: DONE run_id=pipeline-ags-capability-pins-ok-s1-a1\nFAIL code=CAPABILITIES_REGISTRY_INVALID\nAGS: running pipeline\nAGS: verifying pipeline (fail-closed)\nFAIL pipeline verify rc=1\n', stderr="DEBUG: execute cmd=['python', 'CAPABILITY/SKILLS/agents/ant-worker/scripts/run.py', 'LAW/CONTRACTS/_runs/_tmp/phase65_registry/task.json', 'LAW/CONTRACTS/_runs/_tmp/phase65_registry/result.json']\n").returncode
FAILED CAPABILITY/TESTBENCH/test_ags_phase6_capability_pins.py::test_verify_rejects_unpinned_even_if_pipeline_artifact_exists - AssertionError: ERROR: REGISTRY_NONCANONICAL
  
assert 2 == 0
 +  where 2 = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY.TOOLS.ags', 'route', '--plan', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_verify_rejects_unpinned_e0\\plan_ok.json', '--pipeline-id', 'ags-capability-pins-verify-bypass'], returncode=2, stdout='', stderr='ERROR: REGISTRY_NONCANONICAL\n').returncode
FAILED CAPABILITY/TESTBENCH/test_ags_phase6_capability_revokes.py::test_verify_rejects_revoked_capability - AssertionError: Route should succeed: ERROR: REGISTRY_NONCANONICAL
  
assert 2 == 0
 +  where 2 = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY.TOOLS.ags', 'route', '--plan', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_verify_rejects_revoked_ca0\\plan.json', '--pipeline-id', 'test-verify-revocation'], returncode=2, stdout='', stderr='ERROR: REGISTRY_NONCANONICAL\n').returncode
FAILED CAPABILITY/TESTBENCH/test_ags_phase6_capability_revokes.py::test_verify_passes_when_not_revoked - AssertionError: Route should succeed: ERROR: REGISTRY_NONCANONICAL
  
assert 2 == 0
 +  where 2 = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY.TOOLS.ags', 'route', '--plan', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_verify_passes_when_not_re0\\plan.json', '--pipeline-id', 'test-verify-no-revocation'], returncode=2, stdout='', stderr='ERROR: REGISTRY_NONCANONICAL\n').returncode
FAILED CAPABILITY/TESTBENCH/test_phase8_router_receipts.py::test_router_receipts_created - AssertionError: Router should succeed: C:\Users\rene_\AppData\Local\Programs\Python\Python311\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')
  
assert 1 == 0
 +  where 1 = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'TOOLS.ags', 'plan', '--router', 'C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '--router-arg', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_router_receipts_created0\\router.py', '--out', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_router_receipts_created0\\plan.json'], returncode=1, stdout='', stderr="C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n").returncode
FAILED CAPABILITY/TESTBENCH/test_phase8_router_receipts.py::test_router_over_output_fails_closed - assert 'ROUTER_OUTPUT_TOO_LARGE' in ("C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n" + '')
 +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'TOOLS.ags', 'plan', '--router', 'C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '--router-arg', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_router_over_output_fails_0\\router_spam.py', '--out', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_router_over_output_fails_0\\plan.json'], returncode=1, stdout='', stderr="C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n").stderr
 +  and   '' = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'TOOLS.ags', 'plan', '--router', 'C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '--router-arg', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_router_over_output_fails_0\\router_spam.py', '--out', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_router_over_output_fails_0\\plan.json'], returncode=1, stdout='', stderr="C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n").stdout
FAILED CAPABILITY/TESTBENCH/test_phase8_router_receipts.py::test_router_stderr_fails_closed - assert 'ROUTER_STDERR_NOT_EMPTY' in ("C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n" + '')
 +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'TOOLS.ags', 'plan', '--router', 'C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '--router-arg', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_router_stderr_fails_close0\\router_stderr.py', '--out', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_router_stderr_fails_close0\\plan.json'], returncode=1, stdout='', stderr="C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n").stderr
 +  and   '' = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'TOOLS.ags', 'plan', '--router', 'C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '--router-arg', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_router_stderr_fails_close0\\router_stderr.py', '--out', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_router_stderr_fails_close0\\plan.json'], returncode=1, stdout='', stderr="C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n").stdout
FAILED CAPABILITY/TESTBENCH/test_phase8_router_receipts.py::test_capability_escalation_fails_closed - assert 'REVOKED_CAPABILITY' in ("C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n" + '')
 +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'TOOLS.ags', 'plan', '--router', 'C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '--router-arg', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_capability_escalation_fai0\\router_escalate.py', '--out', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_capability_escalation_fai0\\plan.json'], returncode=1, stdout='', stderr="C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n").stderr
 +  and   '' = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'TOOLS.ags', 'plan', '--router', 'C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '--router-arg', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_capability_escalation_fai0\\router_escalate.py', '--out', 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-265\\test_capability_escalation_fai0\\plan.json'], returncode=1, stdout='', stderr="C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'TOOLS.ags' (ModuleNotFoundError: No module named 'TOOLS')\n").stdout
========================= 8 failed, 8 passed in 5.73s =========================
