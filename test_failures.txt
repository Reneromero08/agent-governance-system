============================= test session starts =============================
platform win32 -- Python 3.11.6, pytest-9.0.2, pluggy-1.6.0
rootdir: D:\CCC 2.0\AI\agent-governance-system
plugins: anyio-4.12.0
collected 156 items

CAPABILITY\TESTBENCH\adversarial\test_adversarial_cas.py FFF             [  1%]
CAPABILITY\TESTBENCH\adversarial\test_adversarial_ledger.py FF           [  3%]
CAPABILITY\TESTBENCH\adversarial\test_adversarial_paths.py FFFF          [  5%]
CAPABILITY\TESTBENCH\adversarial\test_adversarial_proof_tamper.py ..     [  7%]
CAPABILITY\TESTBENCH\core\test_cas_store.py FFFFFFF                      [ 11%]
CAPABILITY\TESTBENCH\core\test_hash_toolbelt.py FF                       [ 12%]
CAPABILITY\TESTBENCH\core\test_merkle.py .......                         [ 17%]
CAPABILITY\TESTBENCH\core\test_schemas.py ..                             [ 18%]
CAPABILITY\TESTBENCH\integration\test_cortex_integration.py ...          [ 20%]
CAPABILITY\TESTBENCH\integration\test_demo_memoization_hash_reuse.py F   [ 21%]
CAPABILITY\TESTBENCH\integration\test_deref_logging.py ......            [ 25%]
CAPABILITY\TESTBENCH\integration\test_memoization.py F                   [ 25%]
CAPABILITY\TESTBENCH\integration\test_packing_hygiene.py F               [ 26%]
CAPABILITY\TESTBENCH\integration\test_preflight.py ..........            [ 32%]
CAPABILITY\TESTBENCH\integration\test_skills_registry.py .F              [ 33%]
CAPABILITY\TESTBENCH\integration\test_spectrum_04_05_enforcement.py .... [ 36%]
...                                                                      [ 38%]
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_adapter_contract.py . [ 39%]
.....                                                                    [ 42%]
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_bridge.py F [ 42%]
FF                                                                       [ 44%]
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_capability_pins.py F [ 44%]
FF                                                                       [ 46%]
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_capability_registry.py . [ 46%]
                                                                         [ 46%]
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_capability_revokes.py . [ 47%]
F                                                                        [ 48%]
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_mcp_adapter_e2e.py F [ 48%]
FFFFF                                                                    [ 51%]
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_registry_immutability.py . [ 52%]
F.                                                                       [ 53%]
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_router_slot.py . [ 54%]
                                                                         [ 54%]
CAPABILITY\TESTBENCH\phases\phase7_swarm\test_phase7_acceptance.py FF    [ 55%]
CAPABILITY\TESTBENCH\phases\phase7_swarm\test_swarm_reuse.py F           [ 56%]
CAPABILITY\TESTBENCH\phases\phase7_swarm\test_swarm_runtime.py .         [ 57%]
CAPABILITY\TESTBENCH\phases\phase8_router\test_ags_phase8_model_binding.py F [ 57%]
                                                                         [ 57%]
CAPABILITY\TESTBENCH\phases\phase8_router\test_phase8_router_receipts.py F [ 58%]
FF.F                                                                     [ 60%]
CAPABILITY\TESTBENCH\pipeline\test_canonical_artifacts.py FFF            [ 62%]
CAPABILITY\TESTBENCH\pipeline\test_ledger.py ....                        [ 65%]
CAPABILITY\TESTBENCH\pipeline\test_pipeline_chain.py ....                [ 67%]
CAPABILITY\TESTBENCH\pipeline\test_pipeline_dag.py ..                    [ 69%]
CAPABILITY\TESTBENCH\pipeline\test_pipeline_verify_cli.py ....           [ 71%]
CAPABILITY\TESTBENCH\pipeline\test_pipelines.py .                        [ 72%]
CAPABILITY\TESTBENCH\pipeline\test_proof_gating.py EE                    [ 73%]
CAPABILITY\TESTBENCH\pipeline\test_proof_wiring.py ...                   [ 75%]
CAPABILITY\TESTBENCH\pipeline\test_restore_proof.py ..F....              [ 80%]
CAPABILITY\TESTBENCH\pipeline\test_restore_runner.py ...                 [ 82%]
CAPABILITY\TESTBENCH\pipeline\test_runtime_guard.py .............        [ 90%]
CAPABILITY\TESTBENCH\pipeline\test_verifier_freeze.py F.                 [ 91%]
CAPABILITY\TESTBENCH\pipeline\test_verifier_interop.py ....              [ 94%]
CAPABILITY\TESTBENCH\pipeline\test_verify_bundle.py ......               [ 98%]
CAPABILITY\TESTBENCH\spectrum\test_spectrum02_emission.py F              [ 98%]
CAPABILITY\TESTBENCH\spectrum\test_spectrum02_resume.py F                [ 99%]
CAPABILITY\TESTBENCH\spectrum\test_validator_version_integrity.py .      [100%]

=================================== ERRORS ====================================
_________________ ERROR at setup of test_valid_proof_accepted _________________
CAPABILITY\TESTBENCH\pipeline\test_proof_gating.py:87: in proof_validator
    return RestorationProofValidator(proof_schema_path)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
CAPABILITY\PRIMITIVES\restore_proof.py:46: in __init__
    self.proof_schema = json.loads(self.proof_schema_path.read_text(encoding="utf-8"))
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\rene_\AppData\Local\Programs\Python\Python311\Lib\pathlib.py:1058: in read_text
    with self.open(mode='r', encoding=encoding, errors=errors) as f:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\rene_\AppData\Local\Programs\Python\Python311\Lib\pathlib.py:1044: in open
    return io.open(self, mode, buffering, encoding, errors, newline)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory: 'D:\\CCC 2.0\\AI\\agent-governance-system\\CAPABILITY\\LAW\\SCHEMAS\\proof.schema.json'
___________ ERROR at setup of test_proof_is_single_source_of_truth ____________
CAPABILITY\TESTBENCH\pipeline\test_proof_gating.py:87: in proof_validator
    return RestorationProofValidator(proof_schema_path)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
CAPABILITY\PRIMITIVES\restore_proof.py:46: in __init__
    self.proof_schema = json.loads(self.proof_schema_path.read_text(encoding="utf-8"))
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\rene_\AppData\Local\Programs\Python\Python311\Lib\pathlib.py:1058: in read_text
    with self.open(mode='r', encoding=encoding, errors=errors) as f:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\rene_\AppData\Local\Programs\Python\Python311\Lib\pathlib.py:1044: in open
    return io.open(self, mode, buffering, encoding, errors, newline)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory: 'D:\\CCC 2.0\\AI\\agent-governance-system\\CAPABILITY\\LAW\\SCHEMAS\\proof.schema.json'
================================== FAILURES ===================================
________________ test_cas_corruption_detected_by_hash_toolbelt ________________
CAPABILITY\TESTBENCH\adversarial\test_adversarial_cas.py:39: in test_cas_corruption_detected_by_hash_toolbelt
    with pytest.raises(ValueError, match=r"CAS_OBJECT_INTEGRITY_MISMATCH"):
         ^^^^^^
E   NameError: name 'pytest' is not defined
________________ test_cas_truncation_detected_by_hash_toolbelt ________________
CAPABILITY\TESTBENCH\adversarial\test_adversarial_cas.py:57: in test_cas_truncation_detected_by_hash_toolbelt
    with pytest.raises(ValueError, match=r"CAS_OBJECT_INTEGRITY_MISMATCH"):
         ^^^^^^
E   NameError: name 'pytest' is not defined
_______________ test_cas_partial_write_never_treated_as_present _______________
CAPABILITY\TESTBENCH\adversarial\test_adversarial_cas.py:74: in test_cas_partial_write_never_treated_as_present
    with pytest.raises(FileNotFoundError):
         ^^^^^^
E   NameError: name 'pytest' is not defined
___________________ test_ledger_rejects_malformed_json_line ___________________
CAPABILITY\TESTBENCH\adversarial\test_adversarial_ledger.py:4: in test_ledger_rejects_malformed_json_line
    parents[3] = Path(__file__).resolve().parents[3]
                 ^^^^
E   NameError: name 'Path' is not defined
______________ test_ledger_rejects_truncated_last_line_mid_byte _______________
CAPABILITY\TESTBENCH\adversarial\test_adversarial_ledger.py:22: in test_ledger_rejects_truncated_last_line_mid_byte
    parents[3] = Path(__file__).resolve().parents[3]
                 ^^^^
E   NameError: name 'Path' is not defined
____________ test_normalize_relpath_rejects_traversal_and_absolute ____________
CAPABILITY\TESTBENCH\adversarial\test_adversarial_paths.py:20: in test_normalize_relpath_rejects_traversal_and_absolute
    with pytest.raises(ValueError):
         ^^^^^^
E   NameError: name 'pytest' is not defined
____________ test_normalize_relpath_normalizes_separators_and_dot _____________
CAPABILITY\TESTBENCH\adversarial\test_adversarial_paths.py:25: in test_normalize_relpath_normalizes_separators_and_dot
    assert normalize_relpath(r"a\123/./456") == r"a\123/456"
E   AssertionError: assert 'a/123/456' == 'a\\123/456'
E     
E     - a\123/456
E     ?  ^
E     + a/123/456
E     ?  ^
__________________ test_merkle_rejects_non_normalized_paths ___________________
CAPABILITY\TESTBENCH\adversarial\test_adversarial_paths.py:31: in test_merkle_rejects_non_normalized_paths
    with pytest.raises(ValueError, match=r"non-normalized path"):
         ^^^^^^
E   NameError: name 'pytest' is not defined
______________ test_build_manifest_rejects_non_normalized_paths _______________
CAPABILITY\TESTBENCH\adversarial\test_adversarial_paths.py:41: in test_build_manifest_rejects_non_normalized_paths
    with pytest.raises(ValueError, match=r"non-normalized path"):
         ^^^^^^
E   NameError: name 'pytest' is not defined
_____________________ test_put_bytes_same_bytes_same_hash _____________________
CAPABILITY\TESTBENCH\core\test_cas_store.py:16: in test_put_bytes_same_bytes_same_hash
    store = CatalyticStore(tmp_path.parents[3] / "cas")
            ^^^^^^^^^^^^^^
E   NameError: name 'CatalyticStore' is not defined
_______________ test_put_bytes_idempotent_does_not_change_bytes _______________
CAPABILITY\TESTBENCH\core\test_cas_store.py:24: in test_put_bytes_idempotent_does_not_change_bytes
    store = CatalyticStore(tmp_path / "cas")
            ^^^^^^^^^^^^^^
E   NameError: name 'CatalyticStore' is not defined
______________________ test_put_stream_matches_put_bytes ______________________
CAPABILITY\TESTBENCH\core\test_cas_store.py:34: in test_put_stream_matches_put_bytes
    store = CatalyticStore(tmp_path / "cas")
            ^^^^^^^^^^^^^^
E   NameError: name 'CatalyticStore' is not defined
_________________________ test_large_stream_roundtrip _________________________
CAPABILITY\TESTBENCH\core\test_cas_store.py:42: in test_large_stream_roundtrip
    store = CatalyticStore(store_root)
            ^^^^^^^^^^^^^^
E   NameError: name 'CatalyticStore' is not defined
_______________ test_deterministic_object_path_across_instances _______________
CAPABILITY\TESTBENCH\core\test_cas_store.py:67: in test_deterministic_object_path_across_instances
    s1 = CatalyticStore(store_root)
         ^^^^^^^^^^^^^^
E   NameError: name 'CatalyticStore' is not defined
__________________ test_reject_invalid_hash_and_missing_hash __________________
CAPABILITY\TESTBENCH\core\test_cas_store.py:79: in test_reject_invalid_hash_and_missing_hash
    store = CatalyticStore(tmp_path / "cas")
            ^^^^^^^^^^^^^^
E   NameError: name 'CatalyticStore' is not defined
________________ test_normalize_relpath_accepts_and_normalizes ________________
CAPABILITY\TESTBENCH\core\test_cas_store.py:92: in test_normalize_relpath_accepts_and_normalizes
    assert normalize_relpath(r"a\b\c") == "a/b/c"
           ^^^^^^^^^^^^^^^^^
E   NameError: name 'normalize_relpath' is not defined
___________________________ test_hash_ast_identity ____________________________
CAPABILITY\TESTBENCH\core\test_hash_toolbelt.py:18: in test_hash_ast_identity
    h1 = hash_ast(code)
         ^^^^^^^^^^^^^^
E   TypeError: hash_ast() takes 0 positional arguments but 1 was given
_________________________ test_hash_read_text_matches _________________________
CAPABILITY\TESTBENCH\core\test_hash_toolbelt.py:25: in test_hash_read_text_matches
    h = hash_read_text(str(p))
        ^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: hash_read_text() takes 0 positional arguments but 1 was given
_________________ test_phase2_demo_artifacts_are_falsifiable __________________
CAPABILITY\TESTBENCH\integration\test_demo_memoization_hash_reuse.py:15: in test_phase2_demo_artifacts_are_falsifiable
    assert (baseline / "PROOF.json").exists()
E   AssertionError: assert False
E    +  where False = exists()
E    +    where exists = (WindowsPath('D:/CCC 2.0/AI/agent-governance-system/CAPABILITY/TESTBENCH/integration/_demos/memoization_hash_reuse/baseline') / 'PROOF.json').exists
_______________ test_memoization_miss_then_hit_then_invalidate ________________
CAPABILITY\TESTBENCH\integration\test_memoization.py:46: in test_memoization_miss_then_hit_then_invalidate
    runtime.run(
    ^^^^^^^^^^^
E   AttributeError: module 'catalytic_runtime' has no attribute 'run'
____________________________ test_packing_hygiene _____________________________
CAPABILITY\TESTBENCH\integration\test_packing_hygiene.py:18: in test_packing_hygiene
    assert enforce_included_repo_limits([], PackLimits(**limits)) is None
                                            ^^^^^^^^^^^^^^^^^^^^
E   TypeError: PackLimits.__init__() missing 1 required positional argument: 'allow_duplicate_hashes'
_______________________ test_canonical_json_determinism _______________________
CAPABILITY\TESTBENCH\integration\test_skills_registry.py:27: in test_canonical_json_determinism
    assert canonical_json(data) == '{"a": 1, "b": 2}'
E   assert b'{"a":1,"b":2}' == '{"a": 1, "b": 2}'
E    +  where b'{"a":1,"b":2}' = canonical_json({'a': 1, 'b': 2})
_____________________ test_ags_route_deterministic_bytes ______________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_bridge.py:75: in test_ags_route_deterministic_bytes
    plan_dir = REPO_ROOT / "LAW" / "CONTRACTS" / "_runs" / "_tmp" / tmp_root
               ^^^^^^^^^
E   NameError: name 'REPO_ROOT' is not defined
________________________ test_ags_run_calls_verify_ok _________________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_bridge.py:107: in test_ags_run_calls_verify_ok
    plan_dir = REPO_ROOT / "LAW" / "CONTRACTS" / "_runs" / "_tmp" / tmp_root
               ^^^^^^^^^
E   NameError: name 'REPO_ROOT' is not defined
________________ test_pipeline_run_creates_state_when_missing _________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_bridge.py:136: in test_pipeline_run_creates_state_when_missing
    plan_dir = REPO_ROOT / "LAW" / "CONTRACTS" / "_runs" / "_tmp" / tmp_root
               ^^^^^^^^^
E   NameError: name 'REPO_ROOT' is not defined
_________________ test_capability_pinned_routes_and_verifies __________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_capability_pins.py:28: in test_capability_pinned_routes_and_verifies
    cap, _ = _mock_registry(tmp_path)
             ^^^^^^^^^^^^^^
E   NameError: name '_mock_registry' is not defined
________ test_verify_rejects_unpinned_even_if_pipeline_artifact_exists ________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_capability_pins.py:58: in test_verify_rejects_unpinned_even_if_pipeline_artifact_exists
    cap, env = _mock_registry(tmp_path)
               ^^^^^^^^^^^^^^
E   NameError: name '_mock_registry' is not defined
_______________________ test_verify_rejects_empty_pins ________________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_capability_pins.py:77: in test_verify_rejects_empty_pins
    caps = [CAP]
            ^^^
E   NameError: name 'CAP' is not defined
___________________ test_verify_rejects_revoked_capability ____________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_capability_revokes.py:101: in test_verify_rejects_revoked_capability
    cmd_route = [sys.executable, "-m", "CAPABILITY.TOOLS.ags", "route", "--plan", str(plan_path), "--pipeline-id", pipeline_id], env
                                                                                                                                 ^^^
E   NameError: name 'env' is not defined
_______________________________ test_happy_echo _______________________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_mcp_adapter_e2e.py:44: in test_happy_echo
    pytest.fail(f"Wrapper failed. Stderr: {res.stderr}")
    ^^^^^^
E   NameError: name 'pytest' is not defined
______________________________ test_fail_stderr _______________________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_mcp_adapter_e2e.py:69: in test_fail_stderr
    assert "STDERR_EMITTED" in res.stderr
E   assert 'STDERR_EMITTED' in "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: can't open file 'D:\\\\CCC 2.0\\\\AI\\\\ag...ITY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n"
E    +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: can't open file 'D:\\\\CCC 2.0\\\\AI\\\\ag...ITY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', 'D:\\CCC 2.0\\AI\\...TY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n").stderr
______________________________ test_fail_timeout ______________________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_mcp_adapter_e2e.py:86: in test_fail_timeout
    assert "TIMEOUT" in res.stderr
E   assert 'TIMEOUT' in "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: can't open file 'D:\\\\CCC 2.0\\\\AI\\\\ag...ITY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n"
E    +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: can't open file 'D:\\\\CCC 2.0\\\\AI\\\\ag...ITY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', 'D:\\CCC 2.0\\AI\\...TY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n").stderr
_______________________________ test_fail_bloat _______________________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_mcp_adapter_e2e.py:104: in test_fail_bloat
    assert "STDOUT_OVERFLOW" in res.stderr
E   assert 'STDOUT_OVERFLOW' in "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: can't open file 'D:\\\\CCC 2.0\\\\AI\\\\ag...ITY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n"
E    +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: can't open file 'D:\\\\CCC 2.0\\\\AI\\\\ag...ITY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', 'D:\\CCC 2.0\\AI\\...TY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n").stderr
_________________________ test_fail_malformed_output __________________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_mcp_adapter_e2e.py:122: in test_fail_malformed_output
    assert "INVALID_JSON_OUTPUT" in res.stderr
E   assert 'INVALID_JSON_OUTPUT' in "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: can't open file 'D:\\\\CCC 2.0\\\\AI\\\\ag...ITY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n"
E    +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: can't open file 'D:\\\\CCC 2.0\\\\AI\\\\ag...ITY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', 'D:\\CCC 2.0\\AI\\...TY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n").stderr
_______________________________ test_fail_crash _______________________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_mcp_adapter_e2e.py:139: in test_fail_crash
    assert "BAD_EXIT_CODE" in res.stderr
E   assert 'BAD_EXIT_CODE' in "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: can't open file 'D:\\\\CCC 2.0\\\\AI\\\\ag...ITY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n"
E    +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: can't open file 'D:\\\\CCC 2.0\\\\AI\\\\ag...ITY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', 'D:\\CCC 2.0\\AI\\...TY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n").stderr
___________________ test_registry_noncanonical_json_rejects ___________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_registry_immutability.py:66: in test_registry_noncanonical_json_rejects
    assert "REGISTRY_NONCANONICAL" in (r.stderr + r.stdout)
E   AssertionError: assert 'REGISTRY_NONCANONICAL' in ('ERROR: CAPABILITY_HASH_MISMATCH\n' + '')
E    +  where 'ERROR: CAPABILITY_HASH_MISMATCH\n' = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY....so0\\plan.json', '--pipeline-id', 'reg-noncanon'], returncode=2, stdout='', stderr='ERROR: CAPABILITY_HASH_MISMATCH\n').stderr
E    +  and   '' = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY....so0\\plan.json', '--pipeline-id', 'reg-noncanon'], returncode=2, stdout='', stderr='ERROR: CAPABILITY_HASH_MISMATCH\n').stdout
___________________ test_swarm_chain_binds_pipeline_proofs ____________________
CAPABILITY\TESTBENCH\phases\phase7_swarm\test_phase7_acceptance.py:47: in test_swarm_chain_binds_pipeline_proofs
    rt_pipeline = PipelineRuntime(project_root=REPO_ROOT)
                  ^^^^^^^^^^^^^^^
E   NameError: name 'PipelineRuntime' is not defined
__________________ test_swarm_chain_fails_on_tampered_proof ___________________
CAPABILITY\TESTBENCH\phases\phase7_swarm\test_phase7_acceptance.py:146: in test_swarm_chain_fails_on_tampered_proof
    original_chain = (chain_path.read_text().strip() == "Original Chain")
                      ^^^^^^^^^^
E   UnboundLocalError: cannot access local variable 'chain_path' where it is not associated with a value
________________________ test_swarm_execution_elision _________________________
CAPABILITY\TESTBENCH\phases\phase7_swarm\test_swarm_reuse.py:80: in test_swarm_execution_elision
    runs_root / "elision_test/" + p1 + "_jobspec.json",
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: unsupported operand type(s) for +: 'WindowsPath' and 'str'
___________________ test_ags_plan_over_output_fails_closed ____________________
CAPABILITY\TESTBENCH\phases\phase8_router\test_ags_phase8_model_binding.py:59: in test_ags_plan_over_output_fails_closed
    assert r.returncode != 0
E   AssertionError: assert 0 != 0
E    +  where 0 = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY....pData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-340\\test_ags_plan_over_output_fail0\\.router_receipts\n', stderr='').returncode
________________________ test_router_receipts_created _________________________
CAPABILITY\TESTBENCH\phases\phase8_router\test_phase8_router_receipts.py:83: in test_router_receipts_created
    assert r.returncode == 0, f"Router should succeed: {r.stderr}"
E   AssertionError: Router should succeed: C:\Users\rene_\AppData\Local\Programs\Python\Python311\python.exe: Error while finding module specification for 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')
E     
E   assert 1 == 0
E    +  where 1 = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY/...LITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n").returncode
____________________ test_router_over_output_fails_closed _____________________
CAPABILITY\TESTBENCH\phases\phase8_router\test_phase8_router_receipts.py:150: in test_router_over_output_fails_closed
    assert "ROUTER_OUTPUT_TOO_LARGE" in (r.stderr + r.stdout)
E   assert 'ROUTER_OUTPUT_TOO_LARGE' in ("C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification f...ILITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n" + '')
E    +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification f...ILITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY/...LITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n").stderr
E    +  and   '' = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY/...LITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n").stdout
_______________________ test_router_stderr_fails_closed _______________________
CAPABILITY\TESTBENCH\phases\phase8_router\test_phase8_router_receipts.py:185: in test_router_stderr_fails_closed
    assert "ROUTER_STDERR_NOT_EMPTY" in (r.stderr + r.stdout)
E   assert 'ROUTER_STDERR_NOT_EMPTY' in ("C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification f...ILITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n" + '')
E    +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification f...ILITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY/...LITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n").stderr
E    +  and   '' = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY/...LITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n").stdout
___________________ test_capability_escalation_fails_closed ___________________
CAPABILITY\TESTBENCH\phases\phase8_router\test_phase8_router_receipts.py:282: in test_capability_escalation_fails_closed
    assert "REVOKED_CAPABILITY" in (r.stderr + r.stdout)
E   assert 'REVOKED_CAPABILITY' in ("C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification f...ILITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n" + '')
E    +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification f...ILITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY/...LITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n").stderr
E    +  and   '' = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY/...LITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n").stdout
____________________ test_canonical_artifact_set_required _____________________
CAPABILITY\TESTBENCH\pipeline\test_canonical_artifacts.py:11: in test_canonical_artifact_set_required
    with TemporaryDirectory() as tmpdir:
         ^^^^^^^^^^^^^^^^^^
E   NameError: name 'TemporaryDirectory' is not defined
__________________________ test_status_state_machine __________________________
CAPABILITY\TESTBENCH\pipeline\test_canonical_artifacts.py:39: in test_status_state_machine
    with TemporaryDirectory() as tmpdir:
         ^^^^^^^^^^^^^^^^^^
E   NameError: name 'TemporaryDirectory' is not defined
___________________________ test_proof_written_last ___________________________
CAPABILITY\TESTBENCH\pipeline\test_canonical_artifacts.py:108: in test_proof_written_last
    with TemporaryDirectory() as tmpdir:
         ^^^^^^^^^^^^^^^^^^
E   NameError: name 'TemporaryDirectory' is not defined
______________________ test_missing_files_verified_false ______________________
CAPABILITY\TESTBENCH\pipeline\test_restore_proof.py:121: in test_missing_files_verified_false
    assert proof["restoration_result"]["verified"] is False
E   assert True is False
____________________________ test_verifier_import _____________________________
CAPABILITY\TESTBENCH\pipeline\test_verifier_freeze.py:11: in test_verifier_import
    from CAPABILITY.PRIMITIVES.verify_bundle import verify_bundle
E   ImportError: cannot import name 'verify_bundle' from 'CAPABILITY.PRIMITIVES.verify_bundle' (D:\CCC 2.0\AI\agent-governance-system\CAPABILITY\PRIMITIVES\verify_bundle.py)
__________________________ test_spectrum02_emission ___________________________
CAPABILITY\TESTBENCH\spectrum\test_spectrum02_emission.py:303: in test_spectrum02_emission
    assert runner.run_all()
E   assert False
E    +  where False = run_all()
E    +    where run_all = <test_spectrum02_emission.RunnerSPECTRUM02Emission object at 0x0000022FA9775B10>.run_all
---------------------------- Captured stdout call -----------------------------
============================================================
SPECTRUM-02: Bundle Emission Integration Tests
============================================================
PROJECT_ROOT: D:\CCC 2.0\AI\agent-governance-system
VALIDATOR_SEMVER: 1.0.0

[PASS] test_bundle_emitted_on_success (skill_complete)
[PASS] test_bundle_emitted_on_success (OUTPUT_HASHES.json exists)
[PASS] test_bundle_verification_accepts_valid (skill_complete)
[PASS] test_bundle_verification_accepts_valid (bundle valid)
[PASS] test_bundle_verification_rejects_tampered (skill_complete)
[PASS] test_bundle_verification_rejects_tampered (bundle invalid)
[FAIL] test_directory_output_hashes_all_files (skill_complete): skill_complete failed: {'status': 'error', 'message': 'CMP-01 output verification failed', 'errors': [{'code': 'PATH_ESCAPES_REPO_ROOT', 'message': 'Absolute paths are not allowed: D:\\CCC 2.0\\AI\\agent-governance-system\\CONTRACTS\\_runs\\spectrum02-dir-output/output.txt', 'path': '/outputs/durable_paths/0', 'details': {'declared': 'D:\\CCC 2.0\\AI\\agent-governance-system\\CONTRACTS\\_runs\\spectrum02-dir-output/output.txt', 'reason': 'absolute_path'}}]}
[PASS] test_directory_output_hashes_all_files (no logs)
[PASS] test_directory_output_hashes_all_files (no tmp)
[PASS] test_directory_output_hashes_all_files (no chat_history.json)
[PASS] test_directory_output_hashes_all_files (no reasoning_trace.json)
[PASS] test_directory_output_hashes_all_files (no checkpoints)
[PASS] test_directory_output_hashes_all_files (no intermediate_state.json)
[PASS] test_no_forbidden_artifacts_in_bundle (skill_complete)
[PASS] test_no_forbidden_artifacts_in_bundle (no logs)
[PASS] test_no_forbidden_artifacts_in_bundle (no tmp)
[PASS] test_no_forbidden_artifacts_in_bundle (no chat_history.json)
[PASS] test_no_forbidden_artifacts_in_bundle (no reasoning_trace.json)
[PASS] test_no_forbidden_artifacts_in_bundle (no checkpoints)
[PASS] test_no_forbidden_artifacts_in_bundle (no intermediate_state.json)

============================================================
PASSED: 19
FAILED: 1
============================================================

Failed tests:
  - test_directory_output_hashes_all_files (skill_complete): skill_complete failed: {'status': 'error', 'message': 'CMP-01 output verification failed', 'errors': [{'code': 'PATH_ESCAPES_REPO_ROOT', 'message': 'Absolute paths are not allowed: D:\\CCC 2.0\\AI\\agent-governance-system\\CONTRACTS\\_runs\\spectrum02-dir-output/output.txt', 'path': '/outputs/durable_paths/0', 'details': {'declared': 'D:\\CCC 2.0\\AI\\agent-governance-system\\CONTRACTS\\_runs\\spectrum02-dir-output/output.txt', 'reason': 'absolute_path'}}]}
___________________________ test_spectrum02_resume ____________________________
CAPABILITY\TESTBENCH\spectrum\test_spectrum02_resume.py:5: in test_spectrum02_resume
    from ..spectrum import RunnerSPECTRUM02Resume  # Update sys.path to include parents[3]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   ImportError: attempted relative import with no known parent package
============================== warnings summary ===============================
CAPABILITY\PRIMITIVES\ledger.py:9
CAPABILITY\PRIMITIVES\ledger.py:9
  D:\CCC 2.0\AI\agent-governance-system\CAPABILITY\PRIMITIVES\ledger.py:9: DeprecationWarning: jsonschema.RefResolver is deprecated as of v4.18.0, in favor of the https://github.com/python-jsonschema/referencing library, which provides more compliant referencing behavior as well as more flexible APIs for customization. A future release will remove RefResolver. Please file a feature request (on referencing) if you are missing an API for the kind of customization you need.
    from jsonschema import Draft7Validator, RefResolver

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED CAPABILITY/TESTBENCH/adversarial/test_adversarial_cas.py::test_cas_corruption_detected_by_hash_toolbelt
FAILED CAPABILITY/TESTBENCH/adversarial/test_adversarial_cas.py::test_cas_truncation_detected_by_hash_toolbelt
FAILED CAPABILITY/TESTBENCH/adversarial/test_adversarial_cas.py::test_cas_partial_write_never_treated_as_present
FAILED CAPABILITY/TESTBENCH/adversarial/test_adversarial_ledger.py::test_ledger_rejects_malformed_json_line
FAILED CAPABILITY/TESTBENCH/adversarial/test_adversarial_ledger.py::test_ledger_rejects_truncated_last_line_mid_byte
FAILED CAPABILITY/TESTBENCH/adversarial/test_adversarial_paths.py::test_normalize_relpath_rejects_traversal_and_absolute
FAILED CAPABILITY/TESTBENCH/adversarial/test_adversarial_paths.py::test_normalize_relpath_normalizes_separators_and_dot
FAILED CAPABILITY/TESTBENCH/adversarial/test_adversarial_paths.py::test_merkle_rejects_non_normalized_paths
FAILED CAPABILITY/TESTBENCH/adversarial/test_adversarial_paths.py::test_build_manifest_rejects_non_normalized_paths
FAILED CAPABILITY/TESTBENCH/core/test_cas_store.py::test_put_bytes_same_bytes_same_hash
FAILED CAPABILITY/TESTBENCH/core/test_cas_store.py::test_put_bytes_idempotent_does_not_change_bytes
FAILED CAPABILITY/TESTBENCH/core/test_cas_store.py::test_put_stream_matches_put_bytes
FAILED CAPABILITY/TESTBENCH/core/test_cas_store.py::test_large_stream_roundtrip
FAILED CAPABILITY/TESTBENCH/core/test_cas_store.py::test_deterministic_object_path_across_instances
FAILED CAPABILITY/TESTBENCH/core/test_cas_store.py::test_reject_invalid_hash_and_missing_hash
FAILED CAPABILITY/TESTBENCH/core/test_cas_store.py::test_normalize_relpath_accepts_and_normalizes
FAILED CAPABILITY/TESTBENCH/core/test_hash_toolbelt.py::test_hash_ast_identity
FAILED CAPABILITY/TESTBENCH/core/test_hash_toolbelt.py::test_hash_read_text_matches
FAILED CAPABILITY/TESTBENCH/integration/test_demo_memoization_hash_reuse.py::test_phase2_demo_artifacts_are_falsifiable
FAILED CAPABILITY/TESTBENCH/integration/test_memoization.py::test_memoization_miss_then_hit_then_invalidate
FAILED CAPABILITY/TESTBENCH/integration/test_packing_hygiene.py::test_packing_hygiene
FAILED CAPABILITY/TESTBENCH/integration/test_skills_registry.py::test_canonical_json_determinism
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_bridge.py::test_ags_route_deterministic_bytes
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_bridge.py::test_ags_run_calls_verify_ok
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_bridge.py::test_pipeline_run_creates_state_when_missing
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_capability_pins.py::test_capability_pinned_routes_and_verifies
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_capability_pins.py::test_verify_rejects_unpinned_even_if_pipeline_artifact_exists
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_capability_pins.py::test_verify_rejects_empty_pins
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_capability_revokes.py::test_verify_rejects_revoked_capability
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_mcp_adapter_e2e.py::test_happy_echo
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_mcp_adapter_e2e.py::test_fail_stderr
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_mcp_adapter_e2e.py::test_fail_timeout
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_mcp_adapter_e2e.py::test_fail_bloat
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_mcp_adapter_e2e.py::test_fail_malformed_output
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_mcp_adapter_e2e.py::test_fail_crash
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_registry_immutability.py::test_registry_noncanonical_json_rejects
FAILED CAPABILITY/TESTBENCH/phases/phase7_swarm/test_phase7_acceptance.py::test_swarm_chain_binds_pipeline_proofs
FAILED CAPABILITY/TESTBENCH/phases/phase7_swarm/test_phase7_acceptance.py::test_swarm_chain_fails_on_tampered_proof
FAILED CAPABILITY/TESTBENCH/phases/phase7_swarm/test_swarm_reuse.py::test_swarm_execution_elision
FAILED CAPABILITY/TESTBENCH/phases/phase8_router/test_ags_phase8_model_binding.py::test_ags_plan_over_output_fails_closed
FAILED CAPABILITY/TESTBENCH/phases/phase8_router/test_phase8_router_receipts.py::test_router_receipts_created
FAILED CAPABILITY/TESTBENCH/phases/phase8_router/test_phase8_router_receipts.py::test_router_over_output_fails_closed
FAILED CAPABILITY/TESTBENCH/phases/phase8_router/test_phase8_router_receipts.py::test_router_stderr_fails_closed
FAILED CAPABILITY/TESTBENCH/phases/phase8_router/test_phase8_router_receipts.py::test_capability_escalation_fails_closed
FAILED CAPABILITY/TESTBENCH/pipeline/test_canonical_artifacts.py::test_canonical_artifact_set_required
FAILED CAPABILITY/TESTBENCH/pipeline/test_canonical_artifacts.py::test_status_state_machine
FAILED CAPABILITY/TESTBENCH/pipeline/test_canonical_artifacts.py::test_proof_written_last
FAILED CAPABILITY/TESTBENCH/pipeline/test_restore_proof.py::test_missing_files_verified_false
FAILED CAPABILITY/TESTBENCH/pipeline/test_verifier_freeze.py::test_verifier_import
FAILED CAPABILITY/TESTBENCH/spectrum/test_spectrum02_emission.py::test_spectrum02_emission
FAILED CAPABILITY/TESTBENCH/spectrum/test_spectrum02_resume.py::test_spectrum02_resume
ERROR CAPABILITY/TESTBENCH/pipeline/test_proof_gating.py::test_valid_proof_accepted
ERROR CAPABILITY/TESTBENCH/pipeline/test_proof_gating.py::test_proof_is_single_source_of_truth
============ 51 failed, 103 passed, 2 warnings, 2 errors in 15.52s ============
