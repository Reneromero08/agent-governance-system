---
phase: 8
task_id: "8.5"
slug: "vector-execution-long-horizon"
policy_canon_sha256: "6b3d1a1c6062aaa11b348a76d2ea6d39760927917b6d26a75ef4d413847ab516"
guide_canon_sha256: "cef08c3510f5420f69c228d32d01d5b8bd74d4339f7b800598cf9ae4fbdb0247"
depends_on: []
primary_model: "Claude Opus 4.5 (Thinking) (Reasoning: High)"
fallback_chain: ["Claude Sonnet (Reasoning: High)", "Gemini Pro (Reasoning: High)"]
receipt_path: "LAW/CONTRACTS/_runs/_tmp/prompts/8.5_vector-execution-long-horizon/receipt.json"
report_path: "LAW/CONTRACTS/_runs/_tmp/prompts/8.5_vector-execution-long-horizon/REPORT.md"
max_report_lines: 600
---
## ROLE + MODEL
- You are an AGS executor operating inside this repo.
- You must follow repo LAW/CANON precedence and contracts.
- You must follow NAVIGATION/PROMPTS/1_PROMPT_POLICY_CANON.md and NAVIGATION/PROMPTS/2_PROMPT_GENERATOR_GUIDE_FINAL.md.
- Primary model: Claude Opus 4.5 (Thinking) (Reasoning: High)
- Fallback chain: use only if required to reach DONE = GREEN.

## GOAL
Execute task **8.5** (vector-execution-long-horizon) exactly as specified, without scope drift.

Source prompt body (carried forward, normalized):

---
Model: Claude Opus 4.5 (Thinking)
Thinking: High

```text
ROLE + MODEL
- Primary: Claude Opus 4.5 (Thinking) (Thinking: High)
- Fallback chain: Claude Sonnet 4.5 (Thinking) -> GPT-5.1-Codex-Max -> Gemini 3 Pro (High)

GOAL
Implement **8.5 Vector Execution (R.5) (P2, long-horizon)** by completing its unchecked checklist items from the roadmap. Do not start adjacent sections or “helpful extras”.

SCOPE LOCK
- This prompt implements ONLY this roadmap section.
- Hard rule: no refactors that are not required by the section’s checklist.
- If a checklist item cannot be satisfied without expanding scope, FAIL-CLOSED: emit receipt+report with verdict=FAIL and stop without broadening scope.

SCOPE (WRITE ALLOWLIST)
- Allowed writes (minimal and necessary only):
  - NAVIGATION/ROADMAPS/AGS_ROADMAP_MASTER_REPHASED_TODO_UPDATED.md (only if section requires update)
  - LAW/CONTRACTS/_runs/_tmp/prompts/8-5-vector-execution-r-5-p2-long-horizon/  (receipts + report only)
- Allowed deletes/renames:
  - None by default. If absolutely required, justify in REPORT and keep within allowlist.
- Forbidden (absolute):
  - Any writes under `LAW/CANON/`, `.git/`, `BUILD/`, and any other governance roots not directly required.
  - Any “cleanup sweep” unrelated to the checklist.

REQUIRED FACTS (DERIVE, DON’T Guess)
- Repo sanity:
  - `git rev-parse --show-toplevel`
  - `git status --porcelain`
- Extract the exact checklist items for THIS section (source of truth):
  - python - `.

ARTIFACTS (RECEIPTS + REPORT)
- Receipt:
  - Path: LAW/CONTRACTS/_runs/_tmp/prompts/8-5-vector-execution-r-5-p2-long-horizon/receipt.json
  - JSON, deterministic: sorted keys, stable ordering for lists.
  - Include:
    - section_title, section_slug, timestamp_utc
    - git: HEAD before, HEAD after, branch
    - changed_files: ordered list (from `git diff --name-only`)
    - commands_run: ordered list with exit codes
    - tests_run: ordered list with exit codes
    - verdict: PASS/FAIL
    - errors: ordered list
- Report:
  - Path: LAW/CONTRACTS/_runs/_tmp/prompts/8-5-vector-execution-r-5-p2-long-horizon/REPORT.md
  - Must include:
    - Checklist coverage (each item with evidence)
    - What changed (file list)
    - Proofs (tests/commands + results)
    - Any deviations (should be none) and why
    - Next recommended section ID (if PASS)

EXIT CRITERIA
- [ ] [GLOBAL] All relevant tests pass (task is incomplete until green).
- [ ] [GLOBAL] Receipts emitted (inputs, outputs, hashes, commands run, exit status).
- [ ] [GLOBAL] Human-readable report emitted (what changed, why, how verified, how to reproduce).
- [ ] [GLOBAL] Scope respected (explicit allowlist for writes; deletions/renames only if explicitly scoped).
- [ ] 8.5.1 Code vector representation research + implementation (R.5.1)
- [ ] 8.5.2 Vector ISA design + interpreter (R.5.2)
- [ ] 8.5.3 Hybrid execution runtime + fallback (R.5.3)
- [ ] 8.5.4 SPECTRUM-V verification protocol (R.5.4)
- [ ] 8.5.5 Production integration rollout phases (R.5.5)
- [ ] 9.1 Test MCP tool calling with 0.5B models (Z.6.1)
- [ ] 9.2 Task queue primitives (dispatch/ack/complete) (Z.6.2)
- [ ] 9.3 Chain of command (escalate/directive/resolve) (Z.6.3)
- [ ] 9.4 Governor pattern for ant workers (Z.6.4)
- [ ] 9.5 Delegation Protocol (producer/verifier, patch-first) (D.1)
- [ ] 9.6 Delegation Harness (end-to-end, fixture-backed) (D.2)

```
---

## SCOPE (WRITE ALLOWLIST)
- Allowed writes: only files required by this task; you must enumerate the exact file paths in your report *before* editing them.
- Allowed deletes/renames: only within the same allowlist, and only if necessary to satisfy the task.
- Forbidden writes: everything else.

## REQUIRED FACTS (VERIFY, DO NOT GUESS)
- UNKNOWN_BLOCKER: if a required fact cannot be verified, stop the task with result = BLOCKED_UNKNOWN.
- UNKNOWN_DEFERRABLE: only allowed as `FILL_ME__<KEY>` tokens inside this section.

Preflight token policy:
- Executor scans for `FILL_ME__` tokens.
- If any token is unresolved, stop with result = BLOCKED_UNKNOWN.
- If tokens are resolved, the values must satisfy the same Verify via checks.

Required repo reality checks:
- Verify repo root and target paths exist (ls, stat).
- Verify any referenced scripts or commands exist before invoking.

## PLAN (EXPLICIT STEPS)
1) Preflight: enumerate intended edits and confirm they are within SCOPE allowlist.
2) Implement: perform the task steps from the Source prompt body above.
3) Record: capture commands run and outputs in the report.
4) Validate: run required checks and tests until DONE = GREEN.
5) Write artifacts: receipt JSON and report at the declared paths.

## VALIDATION (DONE = GREEN)
- Run the task-specific verification steps described in the Source prompt body.
- If `scripts/lint-prompt.sh` exists, run it when touching prompt-pack content and apply exit-code rules:
  - exit 1 blocks and stops
  - exit 2 is a warning (record it and continue)
- DONE = GREEN only when all validations pass and scope remained bounded.

## ARTIFACTS (RECEIPT + REPORT)
- receipt_path: LAW/CONTRACTS/_runs/_tmp/prompts/8.5_vector-execution-r-5-p2-long-horizon/receipt.json
- report_path: LAW/CONTRACTS/_runs/_tmp/prompts/8.5_vector-execution-r-5-p2-long-horizon/REPORT.md

Receipt JSON required fields:
- task_id, timestamp_utc, primary_model, fallback_chain, policy_canon_sha256, guide_canon_sha256,
  depends_on, receipt_path, report_path, allowed_writes, allowed_deletes_renames,
  unknowns_or_missing_inputs, commands_run, validations, inputs, outputs, result

Result enum: OK | VERIFICATION_FAILED | BLOCKED_UNKNOWN | INTERNAL_ERROR

## EXIT CRITERIA
- [ ] Task completed per Source prompt body
- [ ] All validations pass (DONE = GREEN)
- [ ] Receipt + report written to declared paths
- [ ] No scope drift (only allowlisted files touched)

