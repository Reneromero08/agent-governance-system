============================= test session starts =============================
platform win32 -- Python 3.11.6, pytest-9.0.2, pluggy-1.6.0
rootdir: D:\CCC 2.0\AI\agent-governance-system
plugins: anyio-4.12.0
collected 155 items

CAPABILITY\TESTBENCH\adversarial\test_adversarial_cas.py ...             [  1%]
CAPABILITY\TESTBENCH\adversarial\test_adversarial_ledger.py ..           [  3%]
CAPABILITY\TESTBENCH\adversarial\test_adversarial_paths.py ...           [  5%]
CAPABILITY\TESTBENCH\adversarial\test_adversarial_proof_tamper.py ..     [  6%]
CAPABILITY\TESTBENCH\core\test_cas_store.py .....F.                      [ 10%]
CAPABILITY\TESTBENCH\core\test_hash_toolbelt.py ..                       [ 12%]
CAPABILITY\TESTBENCH\core\test_merkle.py .......                         [ 16%]
CAPABILITY\TESTBENCH\core\test_schemas.py ..                             [ 18%]
CAPABILITY\TESTBENCH\integration\test_cortex_integration.py ...          [ 20%]
CAPABILITY\TESTBENCH\integration\test_demo_memoization_hash_reuse.py F   [ 20%]
CAPABILITY\TESTBENCH\integration\test_deref_logging.py ......            [ 24%]
CAPABILITY\TESTBENCH\integration\test_memoization.py F                   [ 25%]
CAPABILITY\TESTBENCH\integration\test_packing_hygiene.py F               [ 25%]
CAPABILITY\TESTBENCH\integration\test_preflight.py ..........            [ 32%]
CAPABILITY\TESTBENCH\integration\test_skills_registry.py .F              [ 33%]
CAPABILITY\TESTBENCH\integration\test_spectrum_04_05_enforcement.py .... [ 36%]
...                                                                      [ 38%]
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_adapter_contract.py . [ 38%]
.....                                                                    [ 41%]
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_bridge.py F [ 42%]
FF                                                                       [ 43%]
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_capability_pins.py F [ 44%]
FF                                                                       [ 45%]
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_capability_registry.py . [ 46%]
                                                                         [ 46%]
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_capability_revokes.py F [ 47%]
F                                                                        [ 47%]
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_mcp_adapter_e2e.py F [ 48%]
FFFFF                                                                    [ 51%]
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_registry_immutability.py F [ 52%]
FF                                                                       [ 53%]
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_router_slot.py . [ 54%]
                                                                         [ 54%]
CAPABILITY\TESTBENCH\phases\phase7_swarm\test_phase7_acceptance.py F.    [ 55%]
CAPABILITY\TESTBENCH\phases\phase7_swarm\test_swarm_reuse.py F           [ 56%]
CAPABILITY\TESTBENCH\phases\phase7_swarm\test_swarm_runtime.py .         [ 56%]
CAPABILITY\TESTBENCH\phases\phase8_router\test_ags_phase8_model_binding.py F [ 57%]
                                                                         [ 57%]
CAPABILITY\TESTBENCH\phases\phase8_router\test_phase8_router_receipts.py F [ 58%]
.FFF                                                                     [ 60%]
CAPABILITY\TESTBENCH\pipeline\test_canonical_artifacts.py FFF            [ 62%]
CAPABILITY\TESTBENCH\pipeline\test_ledger.py ....                        [ 65%]
CAPABILITY\TESTBENCH\pipeline\test_pipeline_chain.py ....                [ 67%]
CAPABILITY\TESTBENCH\pipeline\test_pipeline_dag.py ..                    [ 69%]
CAPABILITY\TESTBENCH\pipeline\test_pipeline_verify_cli.py ....           [ 71%]
CAPABILITY\TESTBENCH\pipeline\test_pipelines.py .                        [ 72%]
CAPABILITY\TESTBENCH\pipeline\test_proof_gating.py F.                    [ 73%]
CAPABILITY\TESTBENCH\pipeline\test_proof_wiring.py ...                   [ 75%]
CAPABILITY\TESTBENCH\pipeline\test_restore_proof.py ..F....              [ 80%]
CAPABILITY\TESTBENCH\pipeline\test_restore_runner.py ...                 [ 81%]
CAPABILITY\TESTBENCH\pipeline\test_runtime_guard.py .............        [ 90%]
CAPABILITY\TESTBENCH\pipeline\test_verifier_freeze.py .F                 [ 91%]
CAPABILITY\TESTBENCH\pipeline\test_verifier_interop.py ....              [ 94%]
CAPABILITY\TESTBENCH\pipeline\test_verify_bundle.py ......               [ 98%]
CAPABILITY\TESTBENCH\spectrum\test_spectrum02_emission.py F              [ 98%]
CAPABILITY\TESTBENCH\spectrum\test_spectrum02_resume.py F                [ 99%]
CAPABILITY\TESTBENCH\spectrum\test_validator_version_integrity.py .      [100%]

================================== FAILURES ===================================
__________________ test_reject_invalid_hash_and_missing_hash __________________
CAPABILITY\TESTBENCH\core\test_cas_store.py:92: in test_reject_invalid_hash_and_missing_hash
    store.get_bytes("A" * 64)  # uppercase not allowed
    ^^^^^^^^^^^^^^^^^^^^^^^^^
CAPABILITY\PRIMITIVES\cas_store.py:85: in get_bytes
    raise FileNotFoundError(str(path))
E   FileNotFoundError: C:\Users\rene_\AppData\Local\Temp\pytest-of-Reneshizzle\pytest-345\test_reject_invalid_hash_and_m0\cas\objects\AA\AA\AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
_________________ test_phase2_demo_artifacts_are_falsifiable __________________
CAPABILITY\TESTBENCH\integration\test_demo_memoization_hash_reuse.py:15: in test_phase2_demo_artifacts_are_falsifiable
    assert (baseline / "PROOF.json").exists()
E   AssertionError: assert False
E    +  where False = exists()
E    +    where exists = (WindowsPath('D:/CCC 2.0/AI/agent-governance-system/CAPABILITY/TESTBENCH/integration/_demos/memoization_hash_reuse/baseline') / 'PROOF.json').exists
_______________ test_memoization_miss_then_hit_then_invalidate ________________
CAPABILITY\TESTBENCH\integration\test_memoization.py:60: in test_memoization_miss_then_hit_then_invalidate
    assert runtime.run(cmd_a) == 0
           ^^^^^^^^^^^^^^^^^^
CAPABILITY\TOOLS\catalytic\catalytic_runtime.py:541: in run
    preflight_valid, preflight_errors = self.preflight_validate()
                                        ^^^^^^^^^^^^^^^^^^^^^^^^^
CAPABILITY\TOOLS\catalytic\catalytic_runtime.py:265: in preflight_validate
    jobspec = self.build_jobspec()
              ^^^^^^^^^^^^^^^^^^^^
CAPABILITY\TOOLS\catalytic\catalytic_runtime.py:179: in build_jobspec
    "durable_paths": [str(p.relative_to(PROJECT_ROOT)) for p in self.durable_outputs],
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
CAPABILITY\TOOLS\catalytic\catalytic_runtime.py:179: in <listcomp>
    "durable_paths": [str(p.relative_to(PROJECT_ROOT)) for p in self.durable_outputs],
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\rene_\AppData\Local\Programs\Python\Python311\Lib\pathlib.py:730: in relative_to
    raise ValueError("{!r} is not in the subpath of {!r}"
E   ValueError: 'C:\\Users\\rene_\\AppData\\Local\\Temp\\pytest-of-Reneshizzle\\pytest-345\\test_memoization_miss_then_hit0\\output.txt' is not in the subpath of 'D:\\CCC 2.0\\AI\\agent-governance-system' OR one path is relative and the other is absolute.
---------------------------- Captured stdout call -----------------------------
[catalytic] Starting catalytic run: memoization-test-run
[catalytic] Phase 0: Preflight validation...
____________________________ test_packing_hygiene _____________________________
CAPABILITY\TESTBENCH\integration\test_packing_hygiene.py:23: in test_packing_hygiene
    assert enforce_included_repo_limits([], PackLimits(**limits)) is None
E   AssertionError: assert {'repo_bytes': 0, 'repo_files': 0} is None
E    +  where {'repo_bytes': 0, 'repo_files': 0} = enforce_included_repo_limits([], PackLimits(max_total_bytes=100, max_entry_bytes=50, max_entries=10, allow_duplicate_hashes=True))
E    +    where PackLimits(max_total_bytes=100, max_entry_bytes=50, max_entries=10, allow_duplicate_hashes=True) = PackLimits(**{'allow_duplicate_hashes': True, 'max_entries': 10, 'max_entry_bytes': 50, 'max_total_bytes': 100})
_______________________ test_canonical_json_determinism _______________________
CAPABILITY\TESTBENCH\integration\test_skills_registry.py:27: in test_canonical_json_determinism
    assert canonical_json(data) == '{"a": 1, "b": 2}'
E   assert b'{"a":1,"b":2}' == '{"a": 1, "b": 2}'
E    +  where b'{"a":1,"b":2}' = canonical_json({'a': 1, 'b': 2})
_____________________ test_ags_route_deterministic_bytes ______________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_bridge.py:75: in test_ags_route_deterministic_bytes
    plan_dir = REPO_ROOT / "LAW" / "CONTRACTS" / "_runs" / "_tmp" / tmp_root
               ^^^^^^^^^
E   NameError: name 'REPO_ROOT' is not defined
________________________ test_ags_run_calls_verify_ok _________________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_bridge.py:107: in test_ags_run_calls_verify_ok
    plan_dir = REPO_ROOT / "LAW" / "CONTRACTS" / "_runs" / "_tmp" / tmp_root
               ^^^^^^^^^
E   NameError: name 'REPO_ROOT' is not defined
________________ test_pipeline_run_creates_state_when_missing _________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_bridge.py:136: in test_pipeline_run_creates_state_when_missing
    plan_dir = REPO_ROOT / "LAW" / "CONTRACTS" / "_runs" / "_tmp" / tmp_root
               ^^^^^^^^^
E   NameError: name 'REPO_ROOT' is not defined
_________________ test_capability_pinned_routes_and_verifies __________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_capability_pins.py:27: in test_capability_pinned_routes_and_verifies
    cap, _ = _mock_registry(tmp_path)
             ^^^^^^^^^^^^^^
E   NameError: name '_mock_registry' is not defined
________ test_verify_rejects_unpinned_even_if_pipeline_artifact_exists ________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_capability_pins.py:57: in test_verify_rejects_unpinned_even_if_pipeline_artifact_exists
    cap, env = _mock_registry(tmp_path)
               ^^^^^^^^^^^^^^
E   NameError: name '_mock_registry' is not defined
_______________________ test_verify_rejects_empty_pins ________________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_capability_pins.py:76: in test_verify_rejects_empty_pins
    caps = [CAP]
            ^^^
E   NameError: name 'CAP' is not defined
__________________ test_revoked_capability_rejects_at_route ___________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_capability_revokes.py:59: in test_revoked_capability_rejects_at_route
    assert "REVOKED_CAPABILITY" in (r.stderr + r.stdout), f"Expected REVOKED_CAPABILITY error. Got: {r.stderr + r.stdout}"
E   AssertionError: Expected REVOKED_CAPABILITY error. Got: C:\Users\rene_\AppData\Local\Programs\Python\Python311\python.exe: Error while finding module specification for 'CAPABILITY.TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY')
E     
E   assert 'REVOKED_CAPABILITY' in ("C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'CAPABILITY.TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY')\n" + '')
E    +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'CAPABILITY.TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY')\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY....r while finding module specification for 'CAPABILITY.TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY')\n").stderr
E    +  and   '' = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY....r while finding module specification for 'CAPABILITY.TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY')\n").stdout
___________________ test_verify_rejects_revoked_capability ____________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_capability_revokes.py:100: in test_verify_rejects_revoked_capability
    cmd_route = [sys.executable, "-m", "CAPABILITY.TOOLS.ags", "route", "--plan", str(plan_path), "--pipeline-id", pipeline_id], env
                                                                                                                                 ^^^
E   NameError: name 'env' is not defined
_______________________________ test_happy_echo _______________________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_mcp_adapter_e2e.py:44: in test_happy_echo
    pytest.fail(f"Wrapper failed. Stderr: {res.stderr}")
    ^^^^^^
E   NameError: name 'pytest' is not defined
______________________________ test_fail_stderr _______________________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_mcp_adapter_e2e.py:69: in test_fail_stderr
    assert "STDERR_EMITTED" in res.stderr
E   assert 'STDERR_EMITTED' in "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: can't open file 'D:\\\\CCC 2.0\\\\AI\\\\ag...ITY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n"
E    +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: can't open file 'D:\\\\CCC 2.0\\\\AI\\\\ag...ITY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', 'D:\\CCC 2.0\\AI\\...TY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n").stderr
______________________________ test_fail_timeout ______________________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_mcp_adapter_e2e.py:86: in test_fail_timeout
    assert "TIMEOUT" in res.stderr
E   assert 'TIMEOUT' in "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: can't open file 'D:\\\\CCC 2.0\\\\AI\\\\ag...ITY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n"
E    +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: can't open file 'D:\\\\CCC 2.0\\\\AI\\\\ag...ITY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', 'D:\\CCC 2.0\\AI\\...TY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n").stderr
_______________________________ test_fail_bloat _______________________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_mcp_adapter_e2e.py:104: in test_fail_bloat
    assert "STDOUT_OVERFLOW" in res.stderr
E   assert 'STDOUT_OVERFLOW' in "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: can't open file 'D:\\\\CCC 2.0\\\\AI\\\\ag...ITY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n"
E    +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: can't open file 'D:\\\\CCC 2.0\\\\AI\\\\ag...ITY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', 'D:\\CCC 2.0\\AI\\...TY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n").stderr
_________________________ test_fail_malformed_output __________________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_mcp_adapter_e2e.py:122: in test_fail_malformed_output
    assert "INVALID_JSON_OUTPUT" in res.stderr
E   assert 'INVALID_JSON_OUTPUT' in "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: can't open file 'D:\\\\CCC 2.0\\\\AI\\\\ag...ITY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n"
E    +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: can't open file 'D:\\\\CCC 2.0\\\\AI\\\\ag...ITY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', 'D:\\CCC 2.0\\AI\\...TY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n").stderr
_______________________________ test_fail_crash _______________________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_mcp_adapter_e2e.py:139: in test_fail_crash
    assert "BAD_EXIT_CODE" in res.stderr
E   assert 'BAD_EXIT_CODE' in "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: can't open file 'D:\\\\CCC 2.0\\\\AI\\\\ag...ITY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n"
E    +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: can't open file 'D:\\\\CCC 2.0\\\\AI\\\\ag...ITY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', 'D:\\CCC 2.0\\AI\\...TY\\\\SKILLS\\\\LAW\\\\CONTRACTS\\\\CAPABILITY_TOOLS\\\\scripts\\\\wrapper.py': [Errno 2] No such file or directory\n").stderr
_______________ test_registry_duplicate_capability_hash_rejects _______________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_registry_immutability.py:44: in test_registry_duplicate_capability_hash_rejects
    assert "REGISTRY_DUPLICATE_HASH" in (r.stderr + r.stdout)
E   assert 'REGISTRY_DUPLICATE_HASH' in ("C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'CAPABILITY.TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY')\n" + '')
E    +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'CAPABILITY.TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY')\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY....r while finding module specification for 'CAPABILITY.TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY')\n").stderr
E    +  and   '' = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY....r while finding module specification for 'CAPABILITY.TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY')\n").stdout
___________________ test_registry_noncanonical_json_rejects ___________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_registry_immutability.py:66: in test_registry_noncanonical_json_rejects
    assert "REGISTRY_NONCANONICAL" in (r.stderr + r.stdout)
E   assert 'REGISTRY_NONCANONICAL' in ("C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'CAPABILITY.TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY')\n" + '')
E    +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'CAPABILITY.TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY')\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY....r while finding module specification for 'CAPABILITY.TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY')\n").stderr
E    +  and   '' = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY....r while finding module specification for 'CAPABILITY.TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY')\n").stdout
__________________ test_registry_tamper_detected_fail_closed __________________
CAPABILITY\TESTBENCH\phases\phase6_governance\test_ags_phase6_registry_immutability.py:91: in test_registry_tamper_detected_fail_closed
    assert "CAPABILITY_HASH_MISMATCH" in (r.stderr + r.stdout)
E   assert 'CAPABILITY_HASH_MISMATCH' in ("C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'CAPABILITY.TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY')\n" + '')
E    +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'CAPABILITY.TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY')\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY....r while finding module specification for 'CAPABILITY.TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY')\n").stderr
E    +  and   '' = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY....r while finding module specification for 'CAPABILITY.TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY')\n").stdout
___________________ test_swarm_chain_binds_pipeline_proofs ____________________
CAPABILITY\TESTBENCH\phases\phase7_swarm\test_phase7_acceptance.py:47: in test_swarm_chain_binds_pipeline_proofs
    rt_pipeline = PipelineRuntime(project_root=REPO_ROOT)
                  ^^^^^^^^^^^^^^^
E   NameError: name 'PipelineRuntime' is not defined
________________________ test_swarm_execution_elision _________________________
CAPABILITY\TESTBENCH\phases\phase7_swarm\test_swarm_reuse.py:80: in test_swarm_execution_elision
    runs_root / "elision_test/" + p1 + "_jobspec.json",
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: unsupported operand type(s) for +: 'WindowsPath' and 'str'
___________________ test_ags_plan_over_output_fails_closed ____________________
CAPABILITY\TESTBENCH\phases\phase8_router\test_ags_phase8_model_binding.py:60: in test_ags_plan_over_output_fails_closed
    assert "ROUTER_OUTPUT_TOO_LARGE" in r.stderr
E   assert 'ROUTER_OUTPUT_TOO_LARGE' in "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'CAPABILITY.TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY')\n"
E    +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification for 'CAPABILITY.TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY')\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY....r while finding module specification for 'CAPABILITY.TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY')\n").stderr
________________________ test_router_receipts_created _________________________
CAPABILITY\TESTBENCH\phases\phase8_router\test_phase8_router_receipts.py:80: in test_router_receipts_created
    assert r.returncode == 0, "Router with valid plan should not fail"
E   AssertionError: Router with valid plan should not fail
E   assert 1 == 0
E    +  where 1 = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY/...LITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n").returncode
---------------------------- Captured stdout call -----------------------------
Error: Router with valid plan should not fail
assert 1 == 0
 +  where 1 = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY/...LITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n").returncode
___________________ test_capability_escalation_fails_closed ___________________
CAPABILITY\TESTBENCH\phases\phase8_router\test_phase8_router_receipts.py:178: in test_capability_escalation_fails_closed
    assert "REVOKED_CAPABILITY" in (r.stderr + r.stdout)
E   assert 'REVOKED_CAPABILITY' in ("C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification f...ILITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n" + '')
E    +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification f...ILITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY/...LITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n").stderr
E    +  and   '' = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY/...LITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n").stdout
_______________________ test_router_stderr_fails_closed _______________________
CAPABILITY\TESTBENCH\phases\phase8_router\test_phase8_router_receipts.py:212: in test_router_stderr_fails_closed
    assert "ROUTER_STDERR_NOT_EMPTY" in (r.stderr + r.stdout)
E   assert 'ROUTER_STDERR_NOT_EMPTY' in ("C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification f...ILITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n" + '')
E    +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification f...ILITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY/...LITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n").stderr
E    +  and   '' = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY/...LITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n").stdout
_____________________ test_router_escalation_fails_closed _____________________
CAPABILITY\TESTBENCH\phases\phase8_router\test_phase8_router_receipts.py:276: in test_router_escalation_fails_closed
    assert "REVOKED_CAPABILITY" in (r.stderr + r.stdout)
E   assert 'REVOKED_CAPABILITY' in ("C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification f...ILITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n" + '')
E    +  where "C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe: Error while finding module specification f...ILITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n" = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY/...LITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n").stderr
E    +  and   '' = CompletedProcess(args=['C:\\Users\\rene_\\AppData\\Local\\Programs\\Python\\Python311\\python.exe', '-m', 'CAPABILITY/...LITY/TOOLS.ags' (ModuleNotFoundError: No module named 'CAPABILITY/TESTBENCH/phases/phase8_router/CAPABILITY/TOOLS')\n").stdout
____________________ test_canonical_artifact_set_required _____________________
CAPABILITY\TESTBENCH\pipeline\test_canonical_artifacts.py:13: in test_canonical_artifact_set_required
    with TemporaryDirectory() as tmpdir:
         ^^^^^^^^^^^^^^^^^^
E   NameError: name 'TemporaryDirectory' is not defined
__________________________ test_status_state_machine __________________________
CAPABILITY\TESTBENCH\pipeline\test_canonical_artifacts.py:41: in test_status_state_machine
    with TemporaryDirectory() as tmpdir:
         ^^^^^^^^^^^^^^^^^^
E   NameError: name 'TemporaryDirectory' is not defined
___________________________ test_proof_written_last ___________________________
CAPABILITY\TESTBENCH\pipeline\test_canonical_artifacts.py:110: in test_proof_written_last
    with TemporaryDirectory() as tmpdir:
         ^^^^^^^^^^^^^^^^^^
E   NameError: name 'TemporaryDirectory' is not defined
__________________________ test_valid_proof_accepted __________________________
CAPABILITY\TESTBENCH\pipeline\test_proof_gating.py:79: in test_valid_proof_accepted
    assert success is True
E   assert False is True
______________________ test_missing_files_verified_false ______________________
CAPABILITY\TESTBENCH\pipeline\test_restore_proof.py:121: in test_missing_files_verified_false
    assert proof["restoration_result"]["verified"] is False
E   assert True is False
_____________________________ test_ledger_import ______________________________
CAPABILITY\TESTBENCH\pipeline\test_verifier_freeze.py:15: in test_ledger_import
    from CAPABILITY.PIPELINES.ledger import Ledger
E   ModuleNotFoundError: No module named 'CAPABILITY.PIPELINES.ledger'
__________________________ test_spectrum02_emission ___________________________
CAPABILITY\TESTBENCH\spectrum\test_spectrum02_emission.py:134: in test_spectrum02_emission
    assert runner.run_all()
           ^^^^^^^^^^^^^^^^
CAPABILITY\TESTBENCH\spectrum\test_spectrum02_emission.py:51: in run_all
    self.test_bundle_emitted_on_success()
CAPABILITY\TESTBENCH\spectrum\test_spectrum02_emission.py:76: in test_bundle_emitted_on_success
    assert self.server.emit_bundle(result) == 0
           ^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'MCPTerminalServer' object has no attribute 'emit_bundle'
---------------------------- Captured stdout call -----------------------------
============================================================
SPECTRUM-02: Bundle Emission Integration Tests
============================================================
PROJECT_ROOT: D:\CCC 2.0\AI\agent-governance-system
VALIDATOR_SEMVER: 1.0.0

___________________________ test_spectrum02_resume ____________________________
CAPABILITY\TESTBENCH\spectrum\test_spectrum02_resume.py:5: in test_spectrum02_resume
    from ..spectrum import RunnerSPECTRUM02Resume  # Update sys.path to include parents[3]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   ImportError: attempted relative import with no known parent package
============================== warnings summary ===============================
CAPABILITY\PRIMITIVES\ledger.py:9
CAPABILITY\PRIMITIVES\ledger.py:9
  D:\CCC 2.0\AI\agent-governance-system\CAPABILITY\PRIMITIVES\ledger.py:9: DeprecationWarning: jsonschema.RefResolver is deprecated as of v4.18.0, in favor of the https://github.com/python-jsonschema/referencing library, which provides more compliant referencing behavior as well as more flexible APIs for customization. A future release will remove RefResolver. Please file a feature request (on referencing) if you are missing an API for the kind of customization you need.
    from jsonschema import Draft7Validator, RefResolver

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED CAPABILITY/TESTBENCH/core/test_cas_store.py::test_reject_invalid_hash_and_missing_hash
FAILED CAPABILITY/TESTBENCH/integration/test_demo_memoization_hash_reuse.py::test_phase2_demo_artifacts_are_falsifiable
FAILED CAPABILITY/TESTBENCH/integration/test_memoization.py::test_memoization_miss_then_hit_then_invalidate
FAILED CAPABILITY/TESTBENCH/integration/test_packing_hygiene.py::test_packing_hygiene
FAILED CAPABILITY/TESTBENCH/integration/test_skills_registry.py::test_canonical_json_determinism
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_bridge.py::test_ags_route_deterministic_bytes
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_bridge.py::test_ags_run_calls_verify_ok
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_bridge.py::test_pipeline_run_creates_state_when_missing
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_capability_pins.py::test_capability_pinned_routes_and_verifies
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_capability_pins.py::test_verify_rejects_unpinned_even_if_pipeline_artifact_exists
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_capability_pins.py::test_verify_rejects_empty_pins
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_capability_revokes.py::test_revoked_capability_rejects_at_route
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_capability_revokes.py::test_verify_rejects_revoked_capability
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_mcp_adapter_e2e.py::test_happy_echo
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_mcp_adapter_e2e.py::test_fail_stderr
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_mcp_adapter_e2e.py::test_fail_timeout
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_mcp_adapter_e2e.py::test_fail_bloat
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_mcp_adapter_e2e.py::test_fail_malformed_output
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_mcp_adapter_e2e.py::test_fail_crash
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_registry_immutability.py::test_registry_duplicate_capability_hash_rejects
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_registry_immutability.py::test_registry_noncanonical_json_rejects
FAILED CAPABILITY/TESTBENCH/phases/phase6_governance/test_ags_phase6_registry_immutability.py::test_registry_tamper_detected_fail_closed
FAILED CAPABILITY/TESTBENCH/phases/phase7_swarm/test_phase7_acceptance.py::test_swarm_chain_binds_pipeline_proofs
FAILED CAPABILITY/TESTBENCH/phases/phase7_swarm/test_swarm_reuse.py::test_swarm_execution_elision
FAILED CAPABILITY/TESTBENCH/phases/phase8_router/test_ags_phase8_model_binding.py::test_ags_plan_over_output_fails_closed
FAILED CAPABILITY/TESTBENCH/phases/phase8_router/test_phase8_router_receipts.py::test_router_receipts_created
FAILED CAPABILITY/TESTBENCH/phases/phase8_router/test_phase8_router_receipts.py::test_capability_escalation_fails_closed
FAILED CAPABILITY/TESTBENCH/phases/phase8_router/test_phase8_router_receipts.py::test_router_stderr_fails_closed
FAILED CAPABILITY/TESTBENCH/phases/phase8_router/test_phase8_router_receipts.py::test_router_escalation_fails_closed
FAILED CAPABILITY/TESTBENCH/pipeline/test_canonical_artifacts.py::test_canonical_artifact_set_required
FAILED CAPABILITY/TESTBENCH/pipeline/test_canonical_artifacts.py::test_status_state_machine
FAILED CAPABILITY/TESTBENCH/pipeline/test_canonical_artifacts.py::test_proof_written_last
FAILED CAPABILITY/TESTBENCH/pipeline/test_proof_gating.py::test_valid_proof_accepted
FAILED CAPABILITY/TESTBENCH/pipeline/test_restore_proof.py::test_missing_files_verified_false
FAILED CAPABILITY/TESTBENCH/pipeline/test_verifier_freeze.py::test_ledger_import
FAILED CAPABILITY/TESTBENCH/spectrum/test_spectrum02_emission.py::test_spectrum02_emission
FAILED CAPABILITY/TESTBENCH/spectrum/test_spectrum02_resume.py::test_spectrum02_resume
================= 37 failed, 118 passed, 2 warnings in 16.09s =================
