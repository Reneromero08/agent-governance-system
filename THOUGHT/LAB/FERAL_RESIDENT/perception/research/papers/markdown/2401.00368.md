# Introduction

Text embeddings are vector representations of natural language that encode its semantic information. They are widely used in various natural language processing (NLP) tasks, such as information retrieval (IR), question answering, semantic textual similarity, bitext mining, item recommendation, etc. In the field of IR, the first-stage retrieval often relies on text embeddings to efficiently recall a small set of candidate documents from a large-scale corpus using approximate nearest neighbor search techniques. Embedding-based retrieval is also a crucial component of retrieval-augmented generation (RAG) [@lewis2020retrieval], which is an emerging paradigm that enables large language models (LLMs) to access dynamic external knowledge without modifying the model parameters. Source attribution of generated text is another important application of text embeddings [@gao2023enabling] that can improve the interpretability and trustworthiness of LLMs.

Previous studies have demonstrated that weighted average of pre-trained word embeddings [@pennington2014glove; @arora2019simple] is a strong baseline for measuring semantic similarity. However, these methods fail to capture the rich contextual information of natural language. With the advent of pre-trained language models  [@Devlin2019BERTPO], Sentence-BERT [@Reimers2019SentenceBERTSE] and SimCSE [@Gao2021SimCSESC] have been proposed to learn text embeddings by fine-tuning BERT on natural language inference (NLI) datasets. To further enhance the performance and robustness of text embeddings, state-of-the-art methods like E5 [@wang2022text] and BGE [@xiao2023c] employ a more complex multi-stage training paradigm that first pre-trains on billions of weakly-supervised text pairs, and then fine-tunes on several high-quality labeled datasets.

Existing multi-stage approaches suffer from several drawbacks. Firstly, they entail a complex multi-stage training pipeline that demands substantial engineering efforts to curate large amounts of relevance pairs. Secondly, they rely on manually collected datasets that are often constrained by the diversity of tasks and the coverage of languages. For instance, Instructor [@su2022one] is only trained on instructions from $330$ English datasets, whereas BGE [@xiao2023c] only focuses on high-resource languages such as English and Chinese. Moreover, most existing methods employ BERT-style encoders as the backbone, neglecting the recent advances of training better LLMs and related techniques such as context length extension [@Rozire2023CodeLO].

In this paper, we propose a novel method for text embeddings that leverages LLMs to overcome the limitations of existing approaches. We use proprietary LLMs to generate synthetic data for a diverse range of text embedding tasks in $93$ languages, covering hundreds of thousands of embedding tasks. Specifically, we use a two-step prompting strategy that first prompts the LLMs to brainstorm a pool of candidate tasks, and then prompts the LLMs to generate data conditioned on a given task from the pool. To cover various application scenarios, we design multiple prompt templates for each task type and combine the generated data from different templates to boost diversity. For the text embedding models, we opt for fine-tuning powerful open-source LLMs rather than small BERT-style models. Since LLMs such as Mistral [@jiang2023mistral] have been extensively pre-trained on web-scale data, contrastive pre-training that proves to be important for BERT models [@wang2022text] offers little additional benefit.

We demonstrate that Mistral-7B, when fine-tuned solely on synthetic data, attains competitive performance on the BEIR [@Thakur2021BEIRAH] and MTEB [@muennighoff2023mteb] benchmarks. This is particularly intriguing considering that this setting does not involve any labeled data. When fine-tuned on a mixture of synthetic and labeled data, our model achieves new state-of-the-art results, surpassing previous methods by a significant margin (+$2\%$). The entire training process requires less than $1$k steps.

Moreover, we empirically validate that our model can effectively perform personalized passkey retrieval for inputs up to $32$k tokens by altering the rotation base of the position embeddings, extending the context length beyond the conventional $512$ token limit. Regarding its multilinguality, our model excels on high-resource languages. However, for low-resource languages, there is still room for improvement as current open-source LLMs are not adequately pre-trained on them.

# Related Work

<figure id="fig:prompt_example" data-latex-placement="ht">
<div class="center">
<embed src="./retrieval_prompt.pdf" style="width:90.0%" />
</div>
<figcaption>An example two-step prompt template for generating synthetic data with GPT-4. We first prompt GPT-4 to brainstorm a list of potential retrieval tasks, and then generate <em>(query, positive, hard negative)</em> triplets for each task. “<em>{...}</em>” denotes a placeholder that will be replaced by sampling from a predefined set of values. Full prompts are available in Appendix  <a href="#sec:app_prompts" data-reference-type="ref" data-reference="sec:app_prompts">9</a>.</figcaption>
</figure>

**Text Embeddings** are continuous low-dimensional representations of text and have been extensively applied to various downstream tasks such as information retrieval, question answering, and retrieval-augmented generation (RAG). Early work on text embeddings includes latent semantic indexing [@deerwester1990indexing] and weighted average of word embeddings [@Mikolov2013EfficientEO]. More recent methods exploit supervision from natural language inference [@Bowman2015ALA] and labeled query-document pairs, such as the MS-MARCO passage ranking dataset [@Campos2016MSMA], to train text embeddings [@Reimers2019SentenceBERTSE; @Conneau2017SupervisedLO; @Gao2021SimCSESC]. However, labeled data are often limited in terms of task diversity and language coverage. To address this challenge, methods like Contriever [@Izacard2021TowardsUD], OpenAI Embeddings [@Neelakantan2022TextAC], E5 [@wang2022text], and BGE [@xiao2023c] adopt a multi-stage training paradigm. They first pre-train on large-scale weakly-supervised text pairs using contrastive loss and then fine-tune on small-scale but high-quality datasets. In this paper, we demonstrate that it is possible to obtain state-of-the-art text embeddings with single-stage training.\

**Synthetic Data** Synthetic data generation is a widely studied topic in information retrieval research, with various methods proposed to enhance retrieval systems with artificially created data. For instance, Doc2query [@nogueira2019document], InPars  [@Bonifacio2022InParsUD], and Promptagator [@dai2022promptagator] generate synthetic queries for unlabeled documents, which are then leveraged for document expansion or model training. GPL [@Wang2021GPLGP] employs a cross-encoder to produce pseudo-labels for query-document pairs. Similarly, Query2doc [@wang2023query2doc] generates pseudo-documents for query expansion by few-shot prompting LLMs. Unlike these methods, our approach does not rely on any unlabeled documents or queries and thus can generate more diverse synthetic data.

Another related line of work focuses on knowledge distillation from black-box LLMs by training on synthetic data generated from them. DINO [@schick2021generating] generates synthetic text pairs for semantic textual similarity. Unnatural Instructions [@honovich2022unnatural] is a synthetic instruction following dataset by prompting existing LLMs. Orca [@Mukherjee2023OrcaPL] and Phi [@Gunasekar2023TextbooksAA] propose to train better small language models by using high-quality synthetic data from GPT-3.5/4 [@OpenAI2023GPT4TR].\

**Large Language Models** With the popularization of ChatGPT, large language models (LLMs) have demonstrated remarkable capabilities in instruction following and few-shot in-context learning [@NEURIPS2020_1457c0d6]. However, the most advanced LLMs such as GPT-4 [@OpenAI2023GPT4TR] are proprietary and have little technical details disclosed. To bridge the gap between proprietary and open-source LLMs, several notable efforts have been made, such as LLaMA-2 [@touvron2023llama] and Mistral [@jiang2023mistral] models. A major limitation of LLMs is that they lack awareness of recent events and private knowledge. This issue can be partly mitigated by augmenting LLMs with information retrieved from external sources, a technique known as retrieval-augmented generation (RAG). On the other hand, LLMs can also serve as foundation models to enhance text embeddings. RepLLaMA [@Ma2023FineTuningLF] proposes to fine-tune LLaMA-2 with bi-encoder architecture for ad-hoc retrieval. SGPT [@Muennighoff2022SGPTGS], GTR [@Ni2021LargeDE], and Udever [@zhang2023language] demonstrate the scaling law of text embeddings empirically, but their performance still falls behind small bidirectional encoders such as E5 [@wang2022text] and BGE [@xiao2023c]. In this paper, we present a novel approach to train state-of-the-art text embeddings by exploiting the latest advances of LLMs and synthetic data.

# Method

## Synthetic Data Generation {#sec:synthetic_data_generation}

Utilizing synthetic data generated by advanced LLMs such as GPT-4 presents a compelling opportunity, especially in terms of enhancing diversity across a multitude of tasks and languages. Such diversity is essential for developing robust text embeddings that can perform well across different tasks, be it semantic retrieval, textual similarity, or clustering.

To generate diverse synthetic data, we propose a simple taxonomy that categorizes embedding tasks into several groups, and then apply different prompt templates to each group.\

**Asymmetric Tasks** This category comprises tasks where the query and document are semantically related but are not paraphrases of each other. Depending on the length of the query and document, we further divide asymmetric tasks into four subgroups: short-long match, long-short match, short-short match, and long-long match. For instance, short-long match tasks involve a short query and a long document, which is a typical scenario in commercial search engines. For each subgroup, we design a two-step prompt template that first prompts LLMs brainstorm a list of tasks, and then generates a concrete example conditioned on the task definition. In Figure  [1](#fig:prompt_example){reference-type="ref" reference="fig:prompt_example"}, we show an example prompt for the short-long match subgroup. The full output is available in Table [\[tab:app_synthetic_data_examples\]](#tab:app_synthetic_data_examples){reference-type="ref" reference="tab:app_synthetic_data_examples"}. The outputs from GPT-4 are mostly coherent and of high quality. In our preliminary experiments, we also attempted to generate the task definition and query-document pairs using a single prompt, but the data diversity was not as satisfactory as the proposed two-step approach.\

**Symmetric Tasks** Symmetric tasks involve queries and documents that have similar semantic meanings but different surface forms. We examine two application scenarios: monolingual semantic textual similarity (STS) and bitext retrieval. We design two distinct prompt templates for each scenario, tailored to their specific objectives. Since the task definition is straightforward, we omit the brainstorming step for symmetric tasks.\

To further boost the diversity of the prompts and thus the synthetic data, we incorporate several placeholders in each prompt template, whose values are randomly sampled at runtime. For example, in Figure  [1](#fig:prompt_example){reference-type="ref" reference="fig:prompt_example"}, the value of "*{query_length}*" is sampled from the set "*{less than 5 words, 5-10 words, at least 10 words}*".

To generate multilingual data, we sample the value of "*{language}*" from the language list of XLM-R [@conneau2020unsupervised], giving more weight to high-resource languages. Any generated data that does not conform to the predefined JSON format are discarded during the parsing process. We also remove duplicates based on exact string matching.

## Training

Given a relevant query-document pair ($q^+, d^+$), we first apply the following instruction template to the original query $q^+$ to generate a new one $q^+_\text{inst}$: $$\begin{equation}
 \label{equ:instruction_template}
    q^+_\text{inst}=\text{Instruct: \{task\_definition\}}\ \backslash n\ \text{Query:\ }\{q^+\}
\end{equation}$$ where "*{task_definition}*" is a placeholder for a one-sentence description of the embedding task. For generated synthetic data, we use the outputs from the brainstorming step. For other datasets, such as MS-MARCO, we manually craft the task definitions and apply them to all the queries in the dataset. We do not modify the document side with any instruction prefix. In this way, the document index can be prebuilt, and we can customize the task to perform by changing only the query side.

Given a pretrained LLM, we append an \[EOS\] token to the end of the query and document, and then feed them into the LLM to obtain the query and document embeddings ($\mathbf{h}_{q^+_\text{inst}}, \mathbf{h}_{d^+}$) by taking the last layer \[EOS\] vector. To train the embedding model, we adopt the standard InfoNCE loss $\mathbb{L}$ over the in-batch negatives and hard negatives: $$\begin{equation}
 \label{equ:infonce}
    \min\ \ \mathbb{L} = -\log \frac{\phi(q^+_\text{inst}, d^+)}{\phi(q^+_\text{inst}, d^+) + \displaystyle\sum_{n_i \in \mathbb{N}}(\phi(q^+_\text{inst}, n_i))}
\end{equation}$$ where $\mathbb{N}$ denotes the set of all negatives, and $\phi(q, d)$ is a function that computes the matching score between query $q$ and document $d$. In this paper, we adopt the temperature-scaled cosine similarity function as follows: $$\begin{equation}
 \label{equ:cosine_similarity}
\phi(q, d) = \text{exp}(\frac{1}{\tau}\cos(\mathbf{h}_q, \mathbf{h}_d))
\end{equation}$$ $\tau$ is a temperature hyper-parameter, which is fixed to $0.02$ in our experiments.

# Experiments

## Statistics of the Synthetic Data

<figure id="fig:stat_synthetic_data" data-latex-placement="ht">
<div class="center">
<embed src="./synthetic_data.pdf" style="width:80.0%" />
</div>
<figcaption>Task type and language statistics of the generated synthetic data (see Section <a href="#sec:synthetic_data_generation" data-reference-type="ref" data-reference="sec:synthetic_data_generation">3.1</a> for task type definitions). The “Others” category contains the remaining languages from the XLM-R language list.</figcaption>
</figure>

::: table*
:::

Figure  [2](#fig:stat_synthetic_data){reference-type="ref" reference="fig:stat_synthetic_data"} presents the statistics of our generated synthetic data. We manage to generate $500$k examples with $150$k unique instructions using Azure OpenAI Service [^1], among which $25\%$ are generated by *GPT-35-Turbo* and others are generated by *GPT-4*. The total token consumption is about $180$M. The predominant language is English, with coverage extending to a total of $93$ languages. For the bottom $75$ low-resource languages, there are about $1$k examples per language on average. Please see Table  [\[tab:app_synthetic_data_examples\]](#tab:app_synthetic_data_examples){reference-type="ref" reference="tab:app_synthetic_data_examples"} in the appendix for examples of synthetic data.

In terms of data quality, we find that a portion of *GPT-35-Turbo* outputs do not strictly follow the guidelines specified in the prompt templates. Nevertheless, the overall quality remains acceptable, and preliminary experiments have demonstrated the benefits of incorporating this data subset.

## Model Fine-tuning and Evaluation

::: table*
:::

<figure id="fig:ablation_cont_pretrain" data-latex-placement="ht">
<div class="center">
<embed src="./ablate_cont_pretrain.pdf" style="width:95.0%" />
</div>
<figcaption>Effects of contrastive pre-training. Detailed numbers are in Appendix Table <a href="#tab:app_ablation_pretrain" data-reference-type="ref" data-reference="tab:app_ablation_pretrain">[tab:app_ablation_pretrain]</a>.</figcaption>
</figure>

The pretrained Mistral-7b [@jiang2023mistral] checkpoint is fine-tuned for $1$ epoch using the loss in Equation  [\[equ:infonce\]](#equ:infonce){reference-type="ref" reference="equ:infonce"}. We follow the training recipe from RankLLaMA [@Ma2023FineTuningLF] and utilize LoRA [@hu2021lora] with rank $16$. To further reduce GPU memory requirement, techniques including gradient checkpointing, mixed precision training, and DeepSpeed ZeRO-3 are applied.

For the training data, we utilize both the generated synthetic data and a collection of $13$ public datasets, yielding approximately $1.8$M examples after sampling. More details are available in Appendix  [7](#sec:app_implementation){reference-type="ref" reference="sec:app_implementation"}. To provide a fair comparison with some previous work, we also report results when the only labeled supervision is the MS-MARCO passage ranking [@Campos2016MSMA] dataset.

We evaluate the trained model on the MTEB benchmark [@muennighoff2023mteb]. Note that the retrieval category in MTEB corresponds to the $15$ publicly available datasets in the BEIR benchmark [@Thakur2021BEIRAH]. Evaluation of one model takes about $3$ days on $8$ V100 GPUs due to the need to encode a large number of documents. Although our model can accommodate sequence length beyond $512$, we only evaluate on the first $512$ tokens for efficiency. Official metrics are reported for each category. For more details about the evaluation protocol, please refer to the original papers [@muennighoff2023mteb; @Thakur2021BEIRAH].

## Main Results

In Table [\[tab:mteb\]](#tab:mteb){reference-type="ref" reference="tab:mteb"}, our model "E5$_\text{mistral-7b}$ + full data" attains the highest average score on the MTEB benchmark, outperforming the previous state-of-the-art model by $2.4$ points. In the "w/ synthetic data only" setting, no labeled data is used for training, and yet the performance remains quite competitive. We posit that generative language modeling and text embeddings are the two sides of the same coin, with both tasks requiring the model to have a deep understanding of the natural language. Given an embedding task definition, a truly robust LLM should be able to generate training data on its own and then be transformed into an embedding model through light-weight fine-tuning. Our experiments shed light on the potential of this direction, and more research is needed to fully explore it.

<figure id="fig:task_passkey" data-latex-placement="ht">
<div class="center">
<embed src="./personalized_passkey_retrieval.pdf" style="width:100.0%" />
</div>
<figcaption>Illustration of the <em>personalized passkey retrieval</em> task adapted from  <span class="citation" data-cites="mohtashami2023landmark"></span>. The “<em>&lt;prefix filler&gt;</em>” and “<em>&lt;suffix filler&gt;</em>” are repeats of “<em>The grass is green. The sky is blue. The sun is yellow. Here we go. There and back again.</em>” In addition, each document has a unique person name and a random passkey inserted at a random position. The task is to retrieve the document that contains the given person’s passkey from <span class="math inline">100</span> candidates.</figcaption>
</figure>

<figure id="fig:passkey" data-latex-placement="ht">
<div class="center">
<embed src="./passkey.pdf" style="width:100.0%" />
</div>
<figcaption>Accuracy of personalized passkey retrieval as a function of input context length. For each context length, we randomly generate <span class="math inline">50</span> queries and compute the top-1 accuracy.</figcaption>
</figure>

In Table [\[tab:comparison_commercial\]](#tab:comparison_commercial){reference-type="ref" reference="tab:comparison_commercial"}, we also present a comparison with several commercial text embedding models. However, due to the lack of transparency and documentation about these models, a fair comparison is not feasible. We focus especially on the retrieval performance on the BEIR benchmark, since retrieval-augmented generation is an emerging technique to enhance LLM with external knowledge and proprietary data. As Table [\[tab:comparison_commercial\]](#tab:comparison_commercial){reference-type="ref" reference="tab:comparison_commercial"} shows, our model outperforms the current commercial models by a significant margin.

## Multilingual Retrieval

To assess the multilingual capabilities of our model, we conduct an evaluation on the MIRACL dataset [@Zhang2023MIRACLAM], which comprises human-annotated queries and relevance judgments across $18$ languages. The validation set contains labels for $16$ languages. As shown in Table [\[tab:miracl_high_low_languages\]](#tab:miracl_high_low_languages){reference-type="ref" reference="tab:miracl_high_low_languages"}, our model surpasses mE5$_\text{large}$ on high-resource languages, notably on English. Nevertheless, for low-resource languages, our model remains suboptimal compared to mE5$_\text{base}$. We attribute this to the fact that Mistral-7B is predominantly pre-trained on English data, and we anticipate that future multilingual LLMs will leverage our method to bridge this gap.

To evaluate our model's cross-lingual retrieval capability, we report Bitext mining results in Table  [\[tab:bitext\]](#tab:bitext){reference-type="ref" reference="tab:bitext"}. For baselines including mContriever [@Izacard2021TowardsUD], LaBSE [@feng2022language], and mE5 [@wang2024multilingual], we evaluate the results using publicly available checkpoints. Our observations indicate that, similar to the MIRACL retrieval, E5$_\text{mistral-7b}$ excels in bitext mining for high-resource languages only.

::: table*
:::

# Analysis

## Is Contrastive Pre-training Necessary?

Weakly-supervised contrastive pre-training is one of the key factors behind the success of existing text embedding models. For instance, Contriever [@Izacard2021TowardsUD] treats random cropped spans as positive pairs for pre-training, while E5 [@wang2022text] and BGE [@xiao2023c] collect and filter text pairs from various sources.

This section re-evaluates the necessity of contrastive pre-training for LLMs, particularly those that have been pre-trained on trillions of tokens. Figure [3](#fig:ablation_cont_pretrain){reference-type="ref" reference="fig:ablation_cont_pretrain"} shows that contrastive pre-training benefits XLM-R$_\text{large}$, enhancing its retrieval performance by $8.2$ points when fine-tuned on the same data, which aligns with prior findings. However, for Mistral-7B based models, contrastive pre-training has negligible impact on the model quality. This implies that extensive auto-regressive pre-training enables LLMs to acquire good text representations, and only minimal fine-tuning is required to transform them into effective embedding models.

## Extending to Long Text Embeddings

Existing evaluation datasets for text embedding models are typically short, to evaluate the long-context capability of our model, we introduce a novel synthetic task called *personalized passkey retrieval*, which is illustrated in Figure [4](#fig:task_passkey){reference-type="ref" reference="fig:task_passkey"}. This task requires encoding the passkey information in a long context into the embeddings. We compare the performance of different variants by changing the sliding window size and the RoPE rotation base [@su2024roformer] in Figure  [5](#fig:passkey){reference-type="ref" reference="fig:passkey"}. The results show that the default configuration with $4$k sliding window attains $100\%$ accuracy within $4$k tokens, but the accuracy deteriorates quickly as the context length grows. Naively extending the sliding window size to $32$k results in worse performance. By changing the RoPE rotation base to $10^5$, the model can achieve over $90\%$ accuracy within $32$k tokens. However, this entails a minor trade-off in performance for shorter contexts. A potential avenue for future research is to efficiently adapt the model to longer contexts through lightweight post-training [@zhu2023pose].

## Analysis of Training Hyperparameters

Table [\[tab:ablation_hyperparams\]](#tab:ablation_hyperparams){reference-type="ref" reference="tab:ablation_hyperparams"} presents the results under different configurations. We notice that the Mistral-7B initialization holds an advantage over LLaMA-2 7B, in line with the findings from Mistral-7B technical report [@jiang2023mistral]. The choice of pooling types and LoRA ranks does not affect the overall performance substantially, hence we adhere to the default setting despite the marginal superiority of LoRA rank $8$. On the other hand, the way of adding instructions has a considerable impact on the performance. We conjecture that natural language instructions better inform the model regarding the embedding task at hand, and thus enable the model to generate more discriminative embeddings. Our framework also provides a way to customize the behavior of text embeddings through instructions without the need to fine-tune the model or re-build document index.

# Conclusion

This paper shows that the quality of text embeddings can be substantially enhanced by exploiting LLMs. We prompt proprietary LLMs such as GPT-4 to generate diverse synthetic data with instructions in many languages. Combined with the strong language understanding capability of the Mistral model, we establish new state-of-the-art results for nearly all task categories on the competitive MTEB benchmark. The training process is much more streamlined and efficient than existing multi-stage approaches, thereby obviating the need for intermediate pre-training.

For future work, we aim to further improve the multilingual performance of our model and explore the possibility of using open-source LLMs to generate synthetic data.

# Limitations {#limitations .unnumbered}

In comparison to the mainstream BERT-style encoders, the employment of LLMs, such as Mistral-7B, for text embeddings results in a significantly increased inference cost. The development of more advanced GPUs and better kernel implementations may enhance the efficiency of the inference process. With regards to storage cost, our model is comparatively more expensive, with embeddings of $4096$ dimensions. Early successes in reducing embedding dimensions while maintaining competitive performance have been demonstrated through techniques such as Matryoshka representation learning [@Kusupati2022MatryoshkaRL].

For synthetic data generation, we rely on manual prompt engineering to elicit high-quality outputs from proprietary LLMs. Automatic prompt optimization presents a promising avenue for improving the quality of synthetic data.

# Acknowledgements {#acknowledgements .unnumbered}

We would like to thank anonymous reviewers for their valuable comments, and ACL 2024 and ACL Rolling Review organizers for their efforts. Opinions expressed in this paper are solely those of the authors and do not represent the views of their employers.

# Implementation Details {#sec:app_implementation}

::: table*
:::

::: table*
:::

**Baseline Models** For results with mE5$_\text{base}$ and mE5$_\text{large}$, we use the public checkpoints available at <https://huggingface.co/intfloat/multilingual-e5-base> and <https://huggingface.co/intfloat/multilingual-e5-large> respectively. For experiments in Table [\[tab:ablation_hyperparams\]](#tab:ablation_hyperparams){reference-type="ref" reference="tab:ablation_hyperparams"}, we follow the SGPT [@Muennighoff2022SGPTGS] paper for the implementation of weighted mean pooling. For the "w/ task type prefix" setting, we prepend "classify: " for the long-short matching subgroup, and "query: " for other asymmetric tasks. No prefix is added for symmetric tasks.\

**Training Data** For the "E5$_\text{mistral-7b}$ + full data" setting, our training data comprises generated synthetic data, ELI5 [@fan2019eli5](sample ratio $0.1$), HotpotQA [@yang2018hotpotqa], FEVER [@Thorne2018FEVERAL], MIRACL [@Zhang2023MIRACLAM], MSMARCO passage ranking (sample ratio $0.5$) and document ranking (sample ratio $0.2$) [@Campos2016MSMA], NQ [@Karpukhin2020DensePR], NLI [@Gao2021SimCSESC], SQuAD [@Karpukhin2020DensePR], TriviaQA [@Karpukhin2020DensePR], Quora Duplicate Questions [@quora-question-pairs](sample ratio $0.1$), MrTyDi [@zhang2021mr], DuReader [@qiu2022dureader], and T2Ranking [@xie2023t2ranking](sample ratio $0.5$) datasets. We only include the training set of each dataset. For the datasets without hard negatives, we use mE5$_\text{base}$ to mine top $100$ hard negatives. After sampling, we obtain approximately $1.8$ million examples. The entire training process takes fewer than $1$k steps to complete.\

**Hyperparameters for Fine-tuning** When fine-tuning Mistral-7b [^2], the batch size is set to $2048$ and the learning rate is $10^{-4}$ with $100$ step warmup and linear decay. The weight decay is $0.1$. We add $1$ hard negative for each query-document pair. The fine-tuning process takes roughly $18$ hours on $32$ V100 GPUs with a maximum sequence length $512$. We add LoRA adapters to all linear layers, resulting in a total of $42$M trainable parameters. Our implementation is based on the HuggingFace PEFT library at <https://github.com/huggingface/peft>.\

**Artifacts** The model and dataset release information is available at <https://github.com/microsoft/unilm/tree/master/e5>. We release our trained models and evaluation scripts to facilitate reproducibility and further research.

# Test Set Contamination Analysis {#sec:app_test_set_contamination}

To assess the test set contamination on all the datasets in the MTEB benchmark, we perform a string match based analysis between the test set and our training set, disregarding differences in character case and spacing. We categorize the train-test overlaps into three types:

- **Low entropy texts.** These are texts such as "*i need a coffee*" and "*what does that mean*", which are not considered as contamination because they are common expressions that can occur in various contexts.

- **Question overlap.** We identify $4$ test set questions in the DBPedia dataset that also appear in the TriviaQA training set. Given that they constitute a minor portion of the test set, their impact on the overall performance is insignificant.

- **Retrieval corpus overlap.** Several retrieval datasets share the same retrieval corpus. For instance, the DBPedia, NQ, and TriviaQA datasets all use Wikipedia passages, even though their query sets are different. This is a standard evaluation practice in the field of information retrieval, and we do not regard it as contamination.

In summary, we did not detect substantial contamination risks that could alter the main findings of this paper.

Another aspect to consider is the possibility of test set contamination in the training data of Mistral-7B and GPT-4. However, since the training data of these models is not publicly accessible, it is challenging to estimate the degree of such contamination. Given their widespread use in the research community, we believe it is still a valid comparison if other works also employ these models.

::: table*
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|   Brainstorm a list of potentially useful text retrieval tasks.                                                                                                                                                                |
|                                                                                                                                                                                                                                |
|   Here are a few examples for your reference:                                                                                                                                                                                  |
|                                                                                                                                                                                                                                |
|   \- Retrieve relevant documents for a short keyword web search query that asks for weather information.                                                                                                                       |
|                                                                                                                                                                                                                                |
|   \- Search for documents that answers a FAQ-style query on children's nutrition.                                                                                                                                              |
|                                                                                                                                                                                                                                |
|   Please adhere to the following guidelines:                                                                                                                                                                                   |
|                                                                                                                                                                                                                                |
|   \- Specify what the query is, and what the desired documents are.                                                                                                                                                            |
|                                                                                                                                                                                                                                |
|   \- Each retrieval task should cover a wide range of queries, and should not be too specific.                                                                                                                                 |
|                                                                                                                                                                                                                                |
|   Your output must always be a python list of strings only, with about 20 elements, and each element corresponds to a distinct retrieval task in one sentence. Do not explain yourself or output anything else. Be creative!   |
|   ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
+:===============================================================================================================================================================================================================================+
|   -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------                            |
|   You have been assigned a retrieval task: {task}                                                                                                                                                                              |
|                                                                                                                                                                                                                                |
|   Your mission is to write one text retrieval example for this task in JSON format. The JSON object must contain the following keys:                                                                                           |
|                                                                                                                                                                                                                                |
|   \- \"user_query\": a string, a random user search query specified by the retrieval task.                                                                                                                                     |
|                                                                                                                                                                                                                                |
|   \- \"positive_document\": a string, a relevant document for the user query.                                                                                                                                                  |
|                                                                                                                                                                                                                                |
|   \- \"hard_negative_document\": a string, a hard negative document that only appears relevant to the query.                                                                                                                   |
|                                                                                                                                                                                                                                |
|   Please adhere to the following guidelines:                                                                                                                                                                                   |
|                                                                                                                                                                                                                                |
|   \- The \"user_query\" should be {query_type}, {query_length}, {clarity}, and diverse in topic.                                                                                                                               |
|                                                                                                                                                                                                                                |
|   \- All documents must be created independent of the query. Avoid copying the query verbatim. It's acceptable if some parts of the \"positive_document\" are not topically related to the query.                              |
|                                                                                                                                                                                                                                |
|   \- All documents should be at least {num_words} words long.                                                                                                                                                                  |
|                                                                                                                                                                                                                                |
|   \- The \"hard_negative_document\" contains some useful information, but it should be less useful or comprehensive compared to the \"positive_document\".                                                                     |
|                                                                                                                                                                                                                                |
|   \- Both the query and documents should be in {language}.                                                                                                                                                                     |
|                                                                                                                                                                                                                                |
|   \- Do not provide any explanation in any document on why it is relevant or not relevant to the query.                                                                                                                        |
|                                                                                                                                                                                                                                |
|   \- Both the query and documents require {difficulty} level education to understand.                                                                                                                                          |
|                                                                                                                                                                                                                                |
|   Your output must always be a JSON object only, do not explain yourself or output anything else. Be creative!                                                                                                                 |
|   -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------                            |
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
:::

::: table*
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|   Brainstorm a list of potentially useful text classification tasks.                                                                                                                                                                     |
|                                                                                                                                                                                                                                          |
|   Please adhere to the following guidelines:                                                                                                                                                                                             |
|                                                                                                                                                                                                                                          |
|   \- Tasks should cover a diverse range of domains and task types.                                                                                                                                                                       |
|                                                                                                                                                                                                                                          |
|   Your output must always be a python list of strings only, with about 20 elements, and each element corresponds to a distinct text classification task in one sentence. Do not explain yourself or output anything else. Be creative!   |
|   -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
+:=========================================================================================================================================================================================================================================+
|   ------------------------------------------------------------------------------------------------------------------------------------------                                                                                             |
|   You have been assigned a text classification task: {task}                                                                                                                                                                              |
|                                                                                                                                                                                                                                          |
|   Your mission is to write one text classification example for this task in JSON format. The JSON object must contain the following keys:                                                                                                |
|                                                                                                                                                                                                                                          |
|   \- \"input_text\": a string, the input text specified by the classification task.                                                                                                                                                      |
|                                                                                                                                                                                                                                          |
|   \- \"label\": a string, the correct label of the input text.                                                                                                                                                                           |
|                                                                                                                                                                                                                                          |
|   \- \"misleading_label\": a string, an incorrect label that is related to the task.                                                                                                                                                     |
|                                                                                                                                                                                                                                          |
|   Please adhere to the following guidelines:                                                                                                                                                                                             |
|                                                                                                                                                                                                                                          |
|   \- The \"input_text\" should be {num_words} words and diverse in expression.                                                                                                                                                           |
|                                                                                                                                                                                                                                          |
|   \- The \"misleading_label\" must be a valid label for the given task, but not as appropriate as the \"label\" for the \"input_text\".                                                                                                  |
|                                                                                                                                                                                                                                          |
|   \- The values for all fields should be in {language}.                                                                                                                                                                                  |
|                                                                                                                                                                                                                                          |
|   \- Avoid including the values of the \"label\" and \"misleading_label\" fields in the \"input_text\", that would make the task too easy.                                                                                               |
|                                                                                                                                                                                                                                          |
|   \- The \"input_text\" is {clarity} and requires {difficulty} level education to comprehend.                                                                                                                                            |
|                                                                                                                                                                                                                                          |
|   Your output must always be a JSON object only, do not explain yourself or output anything else. Be creative!                                                                                                                           |
|   ------------------------------------------------------------------------------------------------------------------------------------------                                                                                             |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
:::

::: table*
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|   Brainstorm a list of text matching tasks where both the queries and the groundtruth documents are very short (one or two sentences, even a short phrase).                                                          |
|                                                                                                                                                                                                                      |
|   Here are a few examples:                                                                                                                                                                                           |
|                                                                                                                                                                                                                      |
|   \- Given a scientific paper title, retrieve the title of papers that cite the given paper.                                                                                                                         |
|                                                                                                                                                                                                                      |
|   \- Match a word with its definition.                                                                                                                                                                               |
|                                                                                                                                                                                                                      |
|   \- Provided a notable person's name, identify their occupation or achievement.                                                                                                                                     |
|                                                                                                                                                                                                                      |
|   Your output must always be a python list of strings only, with about 20 elements, and each element corresponds to a distinct task in one sentence. Do not explain yourself or output anything else. Be creative!   |
|   ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
+:=====================================================================================================================================================================================================================+
|   -----------------------------------------------------------------------------------------------------------------------------------------------------------------------                                            |
|   You have been assigned a text matching task: {task}                                                                                                                                                                |
|                                                                                                                                                                                                                      |
|   Your mission is to write one example for this task in JSON format. The JSON object must contain the following keys:                                                                                                |
|                                                                                                                                                                                                                      |
|   \- \"input\": a string, a random input specified by the task.                                                                                                                                                      |
|                                                                                                                                                                                                                      |
|   \- \"positive_document\": a string, a relevant document for the \"input\" according to the task.                                                                                                                   |
|                                                                                                                                                                                                                      |
|   Please adhere to the following guidelines:                                                                                                                                                                         |
|                                                                                                                                                                                                                      |
|   \- The values of all fields should be in {language}.                                                                                                                                                               |
|                                                                                                                                                                                                                      |
|   \- Both the \"input\" and \"positive_document\" should be very short (a sentence or a phrase), avoid substantial word overlaps, otherwise the task would be too easy.                                              |
|                                                                                                                                                                                                                      |
|   \- The \"input\" and \"positive_document\" should be independent of each other.                                                                                                                                    |
|                                                                                                                                                                                                                      |
|   Your output must always be a JSON object only, do not explain yourself or output anything else. Be creative!                                                                                                       |
|   -----------------------------------------------------------------------------------------------------------------------------------------------------------------------                                            |
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
:::

::: table*
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|   Brainstorm a list of text matching tasks where the queries are long documents.                                                                                                                                     |
|                                                                                                                                                                                                                      |
|   Here are a few examples:                                                                                                                                                                                           |
|                                                                                                                                                                                                                      |
|   \- Given a document that supports a debatable argument, find another document that contains opposite arguments.                                                                                                    |
|                                                                                                                                                                                                                      |
|   \- Provided a lengthy business proposal, retrieve competitive business strategies in the same industry.                                                                                                            |
|                                                                                                                                                                                                                      |
|   Your output must always be a python list of strings only, with about 20 elements, and each element corresponds to a distinct task in one sentence. Do not explain yourself or output anything else. Be creative!   |
|   ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
+:=====================================================================================================================================================================================================================+
|   -----------------------------------------------------------------------------------------------------------------------------------------------------------------------                                            |
|   You have been assigned a text matching task: {task}                                                                                                                                                                |
|                                                                                                                                                                                                                      |
|   Your mission is to write one example for this task in JSON format. The JSON object must contain the following keys:                                                                                                |
|                                                                                                                                                                                                                      |
|   \- \"input\": a string, a random input specified by the task.                                                                                                                                                      |
|                                                                                                                                                                                                                      |
|   \- \"positive_document\": a string, a relevant document for the \"input\" according to the task.                                                                                                                   |
|                                                                                                                                                                                                                      |
|   Please adhere to the following guidelines:                                                                                                                                                                         |
|                                                                                                                                                                                                                      |
|   \- The values of all fields should be in {language}.                                                                                                                                                               |
|                                                                                                                                                                                                                      |
|   \- Both the \"input\" and \"positive_document\" should be long documents (at least 300 words), avoid substantial word overlaps, otherwise the task would be too easy.                                              |
|                                                                                                                                                                                                                      |
|   \- The \"input\" and \"positive_document\" should be independent of each other.                                                                                                                                    |
|                                                                                                                                                                                                                      |
|   Your output must always be a JSON object only, do not explain yourself or output anything else. Be creative!                                                                                                       |
|   -----------------------------------------------------------------------------------------------------------------------------------------------------------------------                                            |
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
:::

::: table*
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|   Write a {unit} triple with varying semantic similarity scores in JSON format. The semantic similarity score ranges from 1 to 5, with 1 denotes least similar and 5 denotes most similar.   |
|                                                                                                                                                                                              |
|   Please adhere to the following guidelines:                                                                                                                                                 |
|                                                                                                                                                                                              |
|   \- The keys in JSON are \"S1\", \"S2\", and \"S3\", the values are all strings in {language}, do not add any other keys.                                                                   |
|                                                                                                                                                                                              |
|   \- There should be some word overlaps between all three {unit}s.                                                                                                                           |
|                                                                                                                                                                                              |
|   \- The similarity score between S1 and S2 should be {high_score}.                                                                                                                          |
|                                                                                                                                                                                              |
|   \- The similarity score between S1 and S3 should be {low_score}.                                                                                                                           |
|                                                                                                                                                                                              |
|   \- The {unit}s require {difficulty} level education to understand and should be diverse in terms of topic and length.                                                                      |
|                                                                                                                                                                                              |
|   Your output must always be a JSON object only with three keys \"S1\", \"S2\" and \"S3\", do not explain yourself or output anything else. Be creative!                                     |
|   ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
+:=============================================================================================================================================================================================+
:::

::: table*
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   --------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|   Write a {unit} triple with one {unit} in {src_lang} and two {unit}s in {tgt_lang} with varying translation qualities in JSON format.                                  |
|                                                                                                                                                                         |
|   The triple is denotes as (\"S1\", \"S2\", \"S3\"). The translation quality score ranges from 1 to 5, with higher scores are better.                                   |
|                                                                                                                                                                         |
|   Please adhere to the following guidelines:                                                                                                                            |
|                                                                                                                                                                         |
|   \- The values of \"S1\" is a string in {src_lang}, the value of \"S2\" and \"S3\" are strings in {tgt_lang}.                                                          |
|                                                                                                                                                                         |
|   \- There should be some word overlaps between \"S2\" and \"S3\".                                                                                                      |
|                                                                                                                                                                         |
|   \- The translation quality score of \"S2\" with respect to \"S1\" should be {high_score}.                                                                             |
|                                                                                                                                                                         |
|   \- The translation quality score of \"S3\" with respect to \"S1\" should be {low_score}.                                                                              |
|                                                                                                                                                                         |
|   \- \"S3\" should be grammatical and fluent, but contain some keyword or number translation errors, or miss some information, or contain some redundant information.   |
|                                                                                                                                                                         |
|   \- \"S1\" requires {difficulty} level education to understand and should be diverse in terms of topic and length.                                                     |
|                                                                                                                                                                         |
|   Your output must always be a JSON object only with three keys \"S1\", \"S2\" and \"S3\", do not explain yourself or output anything else. Be creative!                |
|   --------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
+:========================================================================================================================================================================+
:::

# Prompts for Synthetic Data Generation {#sec:app_prompts}

For asymmetric tasks, we list the four prompt templates in Table [\[tab:app_short_long\]](#tab:app_short_long){reference-type="ref" reference="tab:app_short_long"},  [\[tab:app_long_short\]](#tab:app_long_short){reference-type="ref" reference="tab:app_long_short"},  [\[tab:app_short_short\]](#tab:app_short_short){reference-type="ref" reference="tab:app_short_short"}, and  [\[tab:app_long_long\]](#tab:app_long_long){reference-type="ref" reference="tab:app_long_long"}. For symmetric tasks, the prompts templates are available in Table [\[tab:app_sts\]](#tab:app_sts){reference-type="ref" reference="tab:app_sts"} and  [\[tab:app_bitext\]](#tab:app_bitext){reference-type="ref" reference="tab:app_bitext"}. To generate multilingual data, we sample the value of "*{language}*" from the language list of XLM-R [@conneau2020unsupervised] with higher probability for high-resource languages. When prompting GPT-4/3.5, we set the sampling temperature to $1.0$ and the top-$p$ hyperparameter to $1.0$, which is higher than the default setting to encourage more diversity.

# Instructions for Training and Evaluation {#sec:app_instructions}

::: table*
:::

::: table*
:::

We manually write instructions for training datasets, as listed in Table [\[tab:app_train_instructions\]](#tab:app_train_instructions){reference-type="ref" reference="tab:app_train_instructions"}. For evaluation datasets, the instructions are listed in Table [\[tab:app_eval_instructions\]](#tab:app_eval_instructions){reference-type="ref" reference="tab:app_eval_instructions"}.

::: table*
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   --------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|   **Task group:** short-long matching                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   --------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
+:====================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+
|   --------------------------------------------------------------------------------------------------------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|   **Task definition:** The query is a name of a computer software or app, find documents that offer tutorials, guides or user experiences about the software or app.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   --------------------------------------------------------------------------------------------------------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|   **Generated data:** {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   \"user_query\": \"How to use Microsoft Power BI for data analysis\",                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   \"positive_document\": \"Microsoft Power BI is a sophisticated tool that requires time and practice to master. In this tutorial, we'll show you how to navigate Power BI and perform basic data analysis. First, launch the application and log in with a Microsoft account. Next, create a new project using the Wizard on the left-hand toolbar. Import the dataset you wish to work with by clicking on 'Get Data'. Power BI can handle a variety of file formats, including Excel and CSV. Load your data, then use a sequence of drag-and-drop operations to generate charts and (if applicable) maps. If you are confused at any point, consider using the 'Ask a Question' feature for clarification.\",   |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   \"hard_negative_document\": \"Excel is an incredibly powerful tool for managing and analyzing large amounts of data. Our tutorial series focuses on how you can achieve maximum efficiency with Excel. In this guide, we'll walk you through transferring data from your computer to an Excel spreadsheet as well as colour-coding cells to match various criteria. We'll also explore VLOOKUP, conditional formatting, and pivot tables, essentially transforming you into a spreadsheet wizard. Once you've mastered these techniques, consider joining us for our Advanced Data Analysis training to branch out even further.\"                                                                                |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|   ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   --------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|   **Task group:** long-short matching                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   --------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   -------------------------------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|   **Task definition:** Identifying severity level of customer complaints in support tickets                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   -------------------------------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                  |
|   **Generated data:** {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   \"input_text\": \"I am writing to express my intense dissatisfaction with one of your products, a TV that has stopped functioning only a month after purchase. This situation yields less satisfaction to me and speaks voluminously about your quality control procedures in assembly lines. I hope this troubling issue etches into your improvement list for invoking earnest attention.\",                                                                                                                                                                                                                                                                                                                    |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   \"label\": \"High Severity\",                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   \"misleading_label\": \"Low Severity\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|   ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                  |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   --------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|   **Task group:** short-short matching                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   --------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   ----------------------------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|   **Task definition:** Provided a movie quote, find the movie title in which it is said.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   ----------------------------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   --------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|   **Generated data:** {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   \"input\": \"I'm going to make him an offer he can't refuse.\",                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   \"positive_document\": \"The Godfather\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|   --------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   --------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|   **Task group:** long-long matching                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   --------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   -----------------------------------------------------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|   **Task definition:** Provided a legal brief, retrieve other legal documents presenting similar legal arguments.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   -----------------------------------------------------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------    |
|   **Generated data:** {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   \"input\": \"In the united states district court for the eastern district of pennsylvania. Plaintiff John Doe brings this action against Defendants ABC Corporation and XYZ Inc., alleging negligence which resulted in his injuries. The Plaintiff alleges ABC Corporation negligently designed, manufactured, and marketed a specific product. The Plaintiff also asserts XYZ Inc. negligently failed to inspect the same product, leading to harmful exposure. Plaintiff respectfully requests this honorable court to hold the defendants liable and award damages. All parties are diverse for purposes of 28 U.S.C. § 1332.\",                                                                              |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   \"positive_document\": \"Before the Superior Court of California, County of Los Angeles. In the matter of the lawsuit initiated by the Plaintiff Jane Smith against the Defendants PQR Industries and LMN Enterprises, charging they negligently designed, produced, and advertised a product that directly caused harm to her. Furthermore, the Plaintiff has claimed that LMN Enterprises negligently fell short in inspecting the product, leading to unsafe usage. The plaintiff hereby requests this esteemed court to declare the defendants guilty and demands compensation for the damages suffered. According to 28 U.S.C. § 1332, complete diversity exists between the parties to this lawsuit.\"      |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|   --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------    |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   --------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|   **Task group:** bitext matching                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   --------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   --------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|   **Task definition:** Retrieve parallel sentences.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   --------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   --------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|   **Generated data:** {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   \"S1\": \"Men bugun uzumli tort yasashni rejalashtirdim.\",                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   \"S2\": \"I have planned to make a grape cake today.\",                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   \"S3\": \"I am going to bake a strawberry pie today.\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|   --------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   --------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|   **Task group:** monolingual STS                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   --------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   --------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|   **Task definition:** Retrieve semantically similar text.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   --------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   ----------------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|   **Generated data:** {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   \"S1\": \"Tom loves to ride his blue bicycle in the park every morning.\",                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   \"S2\": \"Every morning, Tom enjoys riding his blue bike in the park.\",                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   \"S3\": \"Tom takes his blue pen to school every day.\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|   ----------------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
:::

::: table*
:::

[^1]: <https://oai.azure.com/>

[^2]: <https://huggingface.co/mistralai/Mistral-7B-v0.1>
